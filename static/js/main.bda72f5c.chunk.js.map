{"version":3,"sources":["components/portfolio/About.js","common/DataExtensions/ColourDataExtensions.js","redux/types.js","common/DataExtensions/MidiDataExtensions.js","common/DataExtensions/ParamsDataExtensions.js","redux/actions/helper.js","redux/actionTypes.js","redux/actions/MetaActions.js","redux/helper.js","redux/reducers.js","store.js","workerActions.js","components/portfolio/common/keyboard_element.js","components/synth/components/features/assets/AssetImage.jsx","components/synth/components/features/PanelDivider.jsx","components/synth/components/common/BaseWindow.jsx","components/synth/components/common/Dial.component/Dial.assets.jsx","components/synth/components/common/HeaderText.jsx","components/synth/components/common/Dial.component/DialBackground.jsx","components/synth/components/common/Dial.component/Dial.jsx","components/synth/components/common-core/HOC/ConnectHook.jsx","components/synth/components/common/Dial.component/ConnectDial.jsx","components/synth/components/common/Dial.component/ConnectLogDial.jsx","components/synth/components/common/Dial.component/ConnectSnappyDial.jsx","components/synth/components/common/Dial.component/ReduxDial.jsx","components/synth/components/common/PresetSelector.component/PresetSelector.assets.jsx","components/synth/components/common/PresetSelector.component/PresetSelectorBar.jsx","components/synth/components/common/PresetSelector.component/DropDownScrollbar.jsx","components/synth/components/common/PresetSelector.component/PresetSelectorDropdown.jsx","components/synth/components/common/PresetSelector.component/PresetSelector.jsx","components/synth/components/common/ToggleIcon.jsx","components/synth/components/common/TouchPad.jsx","components/synth/components/common/WavePreviewBox.jsx","redux/actions/AmpEnvActions.js","components/synth/window-panels/AmpEnvPanel.jsx","redux/actions/FilterEnvActions.js","components/synth/window-panels/FilterEnvPanel.jsx","redux/actions/FilterTouchActions.js","components/synth/window-panels/FilterTouchPanel.jsx","redux/actions/MasterActions.js","components/synth/window-panels/MasterPanel.jsx","redux/actions/PitchActions.js","components/synth/window-panels/PitchPanel.jsx","redux/actions/OscActions.js","components/synth/window-panels/OscPanel.jsx","components/SynthWindow.jsx","common/DataExtensions/ComponentDataExtensions.js","components/portfolio/Demo.js","components/portfolio/Footer.js","components/portfolio/Header.js","components/portfolio/Portfolio.js","contentData.js","App.jsx","serviceWorker.js","index.jsx"],"names":["ProductAbout","_Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","contentData","props","react_default","a","createElement","id","className","src","alt","productAbout","productFeatures","map","entry","Component","TechStackAbout","_Component2","prodectTech","rgbaToHexCode","r","g","b","concat","ctOrangeWithOpacity","opacity","reverseDict","dict","keys","reduce","rev","objectSpread","defineProperty","MetaParam","freeze","refresh","altEnabled","kbOctave","InvertedMetaParam","Param","Attack","AmpLFOrate","AmpLFOwidth","Decay","DelayWet","Gain","GeneralAtten","Harmonic2Gain","HarmonicsControl","HarmonicFix","HarmonicFunction","HarmonicPhase","HarmonicV1","HPFCutoff","LPF","LPFattack","LPFceiling","LPFenvelope","LPFfloor","LPFmodrate","LPFrelease","LPFwidth","Pitchmod","PitchmodWidth","Release","ReverbWet","SubOscGain","Sustain","WFunction","InvertedParam","Keys","Modifiers","None","LButton","RButton","Cancel","MButton","XButton1","XButton2","Back","Tab","LineFeed","Clear","Return","Enter","ShiftKey","ControlKey","Menu","Pause","Capital","CapsLock","KanaMode","HanguelMode","HangulMode","JunjaMode","FinalMode","HanjaMode","KanjiMode","Escape","IMEConvert","IMENonconvert","IMEAccept","IMEAceept","IMEModeChange","Space","Prior","PageUp","Next","PageDown","End","Home","Left","Up","Right","Down","Select","Print","Execute","Snapshot","PrintScreen","Insert","Delete","Help","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LWin","RWin","Apps","Sleep","NumPad0","NumPad1","NumPad2","NumPad3","NumPad4","NumPad5","NumPad6","NumPad7","NumPad8","NumPad9","Multiply","Add","Separator","Subtract","Decimal","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","NumLock","Scroll","LShiftKey","RShiftKey","LControlKey","RControlKey","LMenu","RMenu","BrowserBack","BrowserForward","BrowserRefresh","BrowserStop","BrowserSearch","BrowserFavorites","BrowserHome","VolumeMute","VolumeDown","VolumeUp","MediaNextTrack","MediaPreviousTrack","MediaStop","MediaPlayPause","LaunchMail","SelectMedia","LaunchApplication1","LaunchApplication2","OemSemicolon","Oem1","Oemplus","Oemcomma","OemMinus","OemPeriod","OemQuestion","Oem2","Oemtilde","Oem3","OemOpenBrackets","Oem4","OemPipe","Oem5","OemCloseBrackets","Oem6","OemQuotes","Oem7","Oem8","OemBackslash","Oem102","ProcessKey","Packet","Attn","Crsel","Exsel","EraseEof","Play","Zoom","NoName","Pa1","OemClear","KeyCode","Shift","Control","Alt","validateKeyCode","keyCode","midiMapping","_midiMapping","midiToKeyCodeMapping","clampNumber","max","length","undefined","min","Math","actionType","EVENT_KEY_DOWN","EVENT_OCTAVE_INCREMENT","SET_ALL_PARAMS","ALT_KEY_PRESSED","ALT_KEY_RELEASED","SET_PARAM_AMP_ATTACK","SET_PARAM_AMP_DECAY","SET_PARAM_AMP_SUSTAIN","SET_PARAM_AMP_RELEASE","SET_PARAM_AMP_LFO_RATE","SET_PARAM_AMP_LFO_WIDTH","SET_PARAM_OSC_PHASE","SET_PARAM_OSC_WAVEFUNCTION","SET_PARAM_OSC_GAIN","SET_PARAM_DELAY_WET","SET_PARAM_REVERB_LENGTH","SET_PARAM_PITCH_LFO_RATE","SET_PARAM_PITCH_LFO_WIDTH","SET_ENABLE_FILTER_EG","SET_PARAM_FILTER_EG_ATTACK","SET_PARAM_FILTER_EG_RELEASE","SET_PARAM_FILTER_EG_FLOOR","SET_PARAM_FILTER_EG_CEILING","SET_PARAM_FILTER_LFO_RATE","SET_PARAM_FILTER_LFO_WIDTH","SET_PARAM_MASTER_LEVEL","SET_PARAM_FILTER_CUTOFF","SET_PARAM_2ND_HARM_GAIN","SET_META_PARAM_ALT_ENABLED","setParamValueFactory","type","payload","userEventActionFactory","createStoreHook","param","actionCreator","_ref","_ref2","slicedToArray","state","setAllParams","types","data","keyDownEvent","keyUpEvent","getParamSetter","action","meta","params","objectWithoutProperties","prevState","getMetaParamSetter","increment","_value","rootReducer","AmpEnvReducer","FilterEnvReducer","FilterTouchReducer","OscReducer","MasterReducer","MetaReducer","PitchReducer","reducer","epicMiddleware","createEpicMiddleware","handleTouchEnable","ev","octaveKey","octaveKeyPressed","store","dispatch","keyEventsSubject","Subject","keyEvents$","asObservable","octaveSubject","BehaviorSubject","rootEpic","action$","keyDown$","pipe","filter","subscribe","ofType","Observable","preloadedState","epics","composedEpics","combineEpics","middlewares","enhancers","applyMiddleware","composedEnhancers","composeWithDevTools","createStore","run","configureStore","store$","subscriber","next","getState","prevParams","paramKey","prevSet","Set","has","forEach","stateKeyJoined","stateKey","split","paramIden","synthNode","initState","postWorkerAction","WorkerActionFactory","setState","triggerRefresh","publishParam","replayStore$","shareReplay","observerSubscribe","callback","selector","actionSub","distinctUntilChanged","x","y","unsubscribe","hasStarted","synthNodePort$","synthWaveformSubscription","dumpParamsSubscription","presetPromptKey","WorkerActions","sendModule","module","sendModuleAsBytes","intance","sendModuleInstance","sendKeyDown","keyEvent","sendKeyUp","paramData","dumpState","dumpAll","setPreset","presetLine","workletNode","workerAction","port","postMessage","getModuleBytes","_callee","response","regenerator_default","wrap","_context","prev","fetch","sent","arrayBuffer","abrupt","stop","getWasmModule","_getWasmModule","_callee2","AudioContext","actx","moduleBytes","port$","moduleReadyPromise","_context2","window","webkitAudioContext","audioWorklet","addModule","AudioWorkletNode","connect","destination","onmessage","message","error","onmessageerror","Promise","ok","_ref6","take","setupInitState","syncParamsState","waveformSubject","waveform$","dumpParamsSubject","samples","evt","dump","getAllParamValues","_callee3","_context3","resolve","reject","_ref7","ex","_callee4","_context4","postPresetLine","_x","_postPresetLine","_callee5","_context5","keyEvt","_ref3","oct","handleKeyDown","_ref5","_ref4","prompt","handleKeyUp","octaveSelector","addEventListener","repeat","getValue","offsets","KeyboardElement","container","resize","notes","_this","innerHTML","_loop","i","document","classList","add","isSharp","indexOf","appendChild","noteOctave","floor","minNote","offset","style","width","left","toString","handleMouse","fill","isDown","idx","noteNum","note","Note","querySelector","push","shift","noteOff","console","warn","element","remove","elementCache","getImageFromSrc","performNoOp","dir","componentScope","assetName","ext","url","process","useImage","getImage","AssetImage","assetExt","resDirector","onInfoReady","others","assetPath","cacheKey","cached","performNoOpNetworkAction","image","imgInfo","w","naturalWidth","h","naturalHeight","getImageInfo","ReactKonva","assign","PanelDivider","other","esm_extends","AssetImage_AssetImage","BackgroundImage","BaseWindow","height","BaseWindow_BackgroundImage","children","imgWidthPx","imgHeightPx","RoundDialImage","DialMarkerImage","offsetX","offsetY","DialStandbyOverlay","onClick","defaultProps","HeaderText","_props$fillColour","fillColour","color","text","transformedText","uppercase","toUpperCase","fontFamily","fontSize","fontStyle","align","centered","DialBackground","hideBackground","isInactive","noInactive","setInactive","bg_y","Dial_assets_BackgroundImage","Dial_assets_RoundDialImage","HeaderText_HeaderText","Dial_assets_DialStandbyOverlay","Dial","propText","propValue","valueChanged","onValidateValue","_useState","useState","_useState2","setValue","_useState3","_useState4","rectY","setRectY","_useState5","_useState6","useEffect","incrementStateValue","dy","oldValue","nextValue","round","img_w","rotation","onWheel","stopPropagation","stopImmediatePropagation","nextY","deltaY","DialBackground_DialBackground","Dial_assets_DialMarkerImage","draggable","onDragStart","onDragMove","nextRectY","target","onDragEnd","inactive","mouseDown","ConnectHook","hook","initalValue","scale","log","componentCreator","mapDispatchToProps","storage","_mapStateToProps","_map","limit","_map2","scaleFromUnit","_state","exp","ConnectDial","scaleToUnit","Dial_component_Dial","ConnectLogDial","_range$map","bound","_range$map2","logValue","ConnectSnappyDial","segmentCount","_valueChanged","ReduxDial","SelectorBackground","SelectorButton","SelectorUpArrow","SelectorDownArrow","DropDownBackground","DropDownScrollBackground","DropDownScrollbarTop","DropDownScrollbarBtm","PresetEventType","bg_w","sud_w","btn_w","txtColour","PresetSelectorBar","onToggleDropDown","presetText","handleEvent","PresetSelector_assets_SelectorBackground","onMouseDown","PresetSelector_assets_SelectorUpArrow","PresetSelector_assets_SelectorDownArrow","PresetSelector_assets_SelectorButton","bg_h","scrbg_w","DropDownScrollbar","scrolledRows","scrolledRowsChanged","itemsCount","slicedCount","scrollOffsetX","scrollOffsetY","dropScrollTopH","scrollAmtCalc","_scrolledRows","scrollRowsCalc","scrollAmt","setScrollAmt","targetY","calcScrollRows","PresetSelector_assets_DropDownScrollbarTop","PresetSelector_assets_DropDownScrollbarBtm","txtSelectedColour","PresetSelectorDropdown","visible","onChangePreset","presetItems","selIdx","selectedIndex","setScrolledRows","setIndex","scrollIdx","itemTxtColour","listItems","slice","item","points","listItemWidth","stroke","strokeWidth","presetName","PresetSelector_assets_DropDownBackground","PresetSelector_assets_DropDownScrollBackground","DropDownScrollbar_DropDownScrollbar","nextScrolledRows","tempPresetsPromise","parsePresetName","presetArray","index","parsePresetNameFromLine","presetSections","metadata","metadataSections","PresetSelector","isDropVisible","setDropVisible","updatePresetArray","selectedPreset","handlePresetNameAndPush","asyncToGenerator","mark","then","res","presets","initialPresetName","handleNewPresetSelection","_x2","shiftPreset","shiftAmount","presetCount","presetEventType","newPreset","t0","_x3","PresetSelectorBar_PresetSelectorBar","PresetSelectorDropdown_PresetSelectorDropdown","line","ToggleImage","on","ToggleIcon","call","checked","img_x","img_y","txt_x","txt_y","layoutCompleted","handleClick","enabled","bind","assertThisInitialized","handleLayout","_this2","_this$props","ToggleIcon_ToggleImage","ConnectToggle","ToggleIcon_ToggleIcon","TouchPadBackground","TouchPad","hValue","vValue","sensitivity","tapToToggle","enabledChanged","setIsMouseDown","prevOffset","setPrevOffset","_useState7","_useState8","_toggleEnabled","setToggle","toggleEnabled","which","nextToggleState","onMouseMove","dx","hasValueChanged","onMouseUp","TouchPad_TouchPadBackground","ConnectTouchPad","hHook","vHook","hLogScale","vLogScale","splitHandle","hValueChanged","vValueChanged","_ref8","TouchPad_TouchPad","ToggleConnectTouchPad","_ref9","toggleHook","_ref10","enableChanged","_enabled","TouchPad_ConnectTouchPad","WaveBoxBackground","WavePreviewBox","gain","WavePreviewBox_WaveBoxBackground","WavePreviewBox_WavePreviewBoxLine","notNaN","number","WavePreviewBoxLine","Array","setPoints","subscription","pts","maxIdx","mid","sample","clipped","setParamAttack","setParamDecay","setParamSustain","setParamRelease","setParamRate","setParamWidth","AttackHook","DecayHook","SustainHook","ReleaseHook","AmpLFORateHook","AmpLFOWidthHook","AmpEnvPanel","ConnectDial_ConnectDial","AmpLfoPanel","AmpEnvGroupPanel","AmpEnvPanel_AmpEnvPanel","AmpEnvPanel_AmpLfoPanel","setEnableFilterEG","setParamFilterAttack","setParamFilterRelease","setParamFilterFloor","setParamFilterCeiling","EnableEnvHook","EnvFloorHook","EnvCeilingHook","EnvPanel","ToggleIcon_ConnectToggle","EnvGroupPanel","FilterEnvPanel_EnvPanel","setParamFilterCutoff","setParamHarmonic2Gain","setMetaParamAltEnabled","FilterCutoffHook","FilterCutoffTouchHook","Harmonic2GainTouchHook","AltEnabledTouchHook","createMetaStoreHook","FilterPanel","ConnectLogDial_ConnectLogDial","HarmonicsCtrlPanel","TouchPad_ToggleConnectTouchPad","FilterTouchGroupPanel","FilterTouchPanel_FilterPanel","FilterTouchPanel_HarmonicsCtrlPanel","setParamFilterModRate","setParamFilterModeWidth","setParamMasterLevel","FilterModRateHook","LfoPanel","MasterLevelHook","MasterPanel","MasterGroupPanel","MasterPanel_LfoPanel","MasterPanel_MasterPanel","setParamPitchRate","setParamPitchWidth","PitchRateModHook","PitchWidthModHook","PitchPanel","PitchGroupPanel","PitchPanel_PitchPanel","setParamOscPhase","setParamOscWaveFunction","setParamOscGain","setParamDelayLength","setParamDelayWetAmt","setParamReverbWetAmt","OscPhaseHook","OscWaveSelectorHook","OscGainHook","OscPanel","WavePreviewBox_WavePreviewBox","ConnectSnappyDial_ConnectSnappyDial","DelayWetAmountHook","DelayPanel","ReduxDial_ReduxDial","ReverbWetAmountHook","ReverbPanel","OscGroupPanel","enableTouchActive","setTouchActiveEnabled","OscPanel_OscPanel","OscPanel_ReverbPanel","OscPanel_DelayPanel","SynthWindow","obj","showOverlay","setOverlayVisible","showLoading","setIsLoading","row","row--synth","blur-animation","entries","e","join","BaseWindow_BaseWindow","OscPanel_OscGroupPanel","FilterEnvPanel_EnvGroupPanel","MasterPanel_MasterGroupPanel","PitchPanel_PitchGroupPanel","AmpEnvPanel_AmpEnvGroupPanel","FilterTouchPanel_FilterTouchGroupPanel","SynthWindow_WindowCaptionArea","SynthWindow_InitialWindowOverlay","hideOverlay","isLoading","CloseWindowButton","WindowCaptionArea","SynthWindow_CloseWindowButton","PresetSelector_PresetSelector","InitialWindowOverlay","ProductDemo","SynthWindow_SynthWindow","Demo_SynthWindowControls","SynthWindowControls","containerRef","React","createRef","midiEvent$","midi","midiAction","octave","observerUnsubscribe","handleOctaveIncr","current","keyboardInterface","subscriptions","Subscription","midiEventSubscription","keyDown","keyUp","incrAmount","_this3","ref","Footer","socialLinks","href","title","Header","Fragment","productName","productRole","productDescription","name","rel","Portfolio","portfolio","imgurl","description","imagebaseurl","role","linkedinId","skypeid","roleDescription","aboutme","address","website","education","UniversityName","specialization","MonthOfPassing","YearOfPassing","Achievements","work","CompanyName","MonthOfLeaving","YearOfLeaving","skillsDescription","skills","skillname","testimonials","App","Header_Header","Demo_ProductDemo","About_ProductAbout","About_TechStackAbout","Portfolio_Portfolio","Footer_Footer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","src_App","getElementById","URL","origin","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.bda72f5c.chunk.js","sourcesContent":["/* eslint-disable react/prop-types */\r\nimport React, { Component } from 'react';\r\n\r\nexport class ProductAbout extends Component {\r\n  render() {\r\n    let contentData = this.props.contentData;\r\n    return (\r\n      <section id={'about'}>\r\n        <div className=\"row\">\r\n          <div className=\"four columns\">\r\n\r\n            <img className=\"tech-logo\" src=\"images/cropped-osc-panel.png\" alt=\"CitySynth in action\" />\r\n\r\n          </div>\r\n\r\n          <div className=\"eight columns main-col\">\r\n\r\n            <h2>CitySynth</h2>\r\n            <p>\r\n              {\r\n                contentData.productAbout\r\n              }\r\n            </p>\r\n\r\n            <div className=\"row\">\r\n\r\n              <div className=\"eight columns product-details\">\r\n\r\n                <h2>Features</h2>\r\n                <p className=\"features\">\r\n                  {contentData.productFeatures.map(entry => (\r\n                    <span key={entry}>{entry}</span>))}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\nexport class TechStackAbout extends Component {\r\n  render() {\r\n    let contentData = this.props.contentData;\r\n    return (\r\n      <section id={'tech'}>\r\n        <div className=\"row\">\r\n\r\n          <div className=\"eight columns main-col\">\r\n\r\n            <h2>How it works</h2>\r\n            <p>\r\n              {\r\n                contentData.prodectTech\r\n              }\r\n            </p>\r\n\r\n            <div className=\"row\">\r\n\r\n              {/* <div className=\"columns contact-details\">\r\n\r\n                <h2>Contact Details</h2>\r\n                <p className=\"address\">\r\n                  <span>{contentData.name}</span>\r\n                  <br></br>\r\n                  <span>\r\n                    {contentData.address}\r\n                  </span>\r\n                  <br></br>\r\n                  <span>{contentData.website}</span>\r\n                </p>\r\n              </div> */}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"four columns\">\r\n            <div className=\"tech-logo--container\">\r\n              <h3 className=\"tech-logo-header\">Powered by:</h3>\r\n              <img className=\"tech-logo\" src=\"images/webassembly_logo.jpg\" alt=\"WebAssembly Logo\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}","/**\r\n * @param {number} r\r\n * @param {number} g\r\n * @param {number} b\r\n * @param {number | undefined} a\r\n */\r\nexport function rgbaToHexCode(r, g, b, a) {\r\n  return typeof (a) === 'number' ? `rgba(${r}, ${g}, ${b}, ${a / 255.0})` : `rgb(${r}, ${g}, ${b})`;\r\n}\r\n// /**\r\n//  * @param {number} r\r\n//  * @param {number} g\r\n//  * @param {number} b\r\n//  * @param {number | undefined} a\r\n//  */\r\n// export function rgbaToFormattedHexCode(r, g, b, a) {\r\n//   return `#${r.toString(16)}${g.toString(16)}${b.toString(16)}${typeof (a) === 'number' ? a.toString(16) : ''}`;\r\n// }\r\n\r\nexport function ctOrangeWithOpacity(opacity) {\r\n  return { r: 238, g: 129, b: 12, a: opacity };\r\n}","// @ts-check\r\n\r\nexport function reverseDict(dict) {\r\n  return Object.keys(dict)\r\n    .reduce((rev, key) => ({ ...rev, [dict[key]]: key }), {});\r\n}\r\n\r\nexport const MetaParam = Object.freeze({\r\n  refresh: 0,\r\n  altEnabled: 1,\r\n  kbOctave: 2,\r\n});\r\nexport const InvertedMetaParam = reverseDict(MetaParam);\r\n\r\nexport const Param = Object.freeze({\r\n  Attack: 0,\r\n  AmpLFOrate: 1,\r\n  AmpLFOwidth: 2,\r\n  Decay: 3,\r\n  DelayWet: 4,\r\n  Gain: 5,\r\n  GeneralAtten: 6,\r\n  Harmonic2Gain: 7,\r\n  HarmonicsControl: 8,\r\n  HarmonicFix: 9,\r\n  HarmonicFunction: 10,\r\n  HarmonicPhase: 11,\r\n  HarmonicV1: 12,\r\n  HPFCutoff: 13,\r\n  LPF: 14,\r\n  LPFattack: 15,\r\n  LPFceiling: 16,\r\n  LPFenvelope: 17,\r\n  LPFfloor: 18,\r\n  LPFmodrate: 19,\r\n  LPFrelease: 20,\r\n  LPFwidth: 21,\r\n  Pitchmod: 22,\r\n  PitchmodWidth: 23,\r\n  Release: 24,\r\n  ReverbWet: 25,\r\n  SubOscGain: 26,\r\n  Sustain: 27,\r\n  WFunction: 28\r\n});\r\n\r\nexport const InvertedParam = reverseDict(Param);","import { reverseDict } from '../../redux/types';\r\n\r\nconst Keys = {\r\n  Modifiers: -65536,\r\n  None: 0,\r\n  LButton: 1,\r\n  RButton: 2,\r\n  Cancel: 3,\r\n  MButton: 4,\r\n  XButton1: 5,\r\n  XButton2: 6,\r\n  Back: 8,\r\n  Tab: 9,\r\n  LineFeed: 10,\r\n  Clear: 12,\r\n  Return: 13,\r\n  Enter: 13,\r\n  ShiftKey: 16,\r\n  ControlKey: 17,\r\n  Menu: 18,\r\n  Pause: 19,\r\n  Capital: 20,\r\n  CapsLock: 20,\r\n  KanaMode: 21,\r\n  HanguelMode: 21,\r\n  HangulMode: 21,\r\n  JunjaMode: 23,\r\n  FinalMode: 24,\r\n  HanjaMode: 25,\r\n  KanjiMode: 25,\r\n  Escape: 27,\r\n  IMEConvert: 28,\r\n  IMENonconvert: 29,\r\n  IMEAccept: 30,\r\n  IMEAceept: 30,\r\n  IMEModeChange: 31,\r\n  Space: 32,\r\n  Prior: 33,\r\n  PageUp: 33,\r\n  Next: 34,\r\n  PageDown: 34,\r\n  End: 35,\r\n  Home: 36,\r\n  Left: 37,\r\n  Up: 38,\r\n  Right: 39,\r\n  Down: 40,\r\n  Select: 41,\r\n  Print: 42,\r\n  Execute: 43,\r\n  Snapshot: 44,\r\n  PrintScreen: 44,\r\n  Insert: 45,\r\n  Delete: 46,\r\n  Help: 47,\r\n  D0: 48,\r\n  D1: 49,\r\n  D2: 50,\r\n  D3: 51,\r\n  D4: 52,\r\n  D5: 53,\r\n  D6: 54,\r\n  D7: 55,\r\n  D8: 56,\r\n  D9: 57,\r\n  A: 65,\r\n  B: 66,\r\n  C: 67,\r\n  D: 68,\r\n  E: 69,\r\n  F: 70,\r\n  G: 71,\r\n  H: 72,\r\n  I: 73,\r\n  J: 74,\r\n  K: 75,\r\n  L: 76,\r\n  M: 77,\r\n  N: 78,\r\n  O: 79,\r\n  P: 80,\r\n  Q: 81,\r\n  R: 82,\r\n  S: 83,\r\n  T: 84,\r\n  U: 85,\r\n  V: 86,\r\n  W: 87,\r\n  X: 88,\r\n  Y: 89,\r\n  Z: 90,\r\n  LWin: 91,\r\n  RWin: 92,\r\n  Apps: 93,\r\n  Sleep: 95,\r\n  NumPad0: 96,\r\n  NumPad1: 97,\r\n  NumPad2: 98,\r\n  NumPad3: 99,\r\n  NumPad4: 100,\r\n  NumPad5: 101,\r\n  NumPad6: 102,\r\n  NumPad7: 103,\r\n  NumPad8: 104,\r\n  NumPad9: 105,\r\n  Multiply: 106,\r\n  Add: 107,\r\n  Separator: 108,\r\n  Subtract: 109,\r\n  Decimal: 110,\r\n  Divide: 111,\r\n  F1: 112,\r\n  F2: 113,\r\n  F3: 114,\r\n  F4: 115,\r\n  F5: 116,\r\n  F6: 117,\r\n  F7: 118,\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123,\r\n  F13: 124,\r\n  F14: 125,\r\n  F15: 126,\r\n  F16: 127,\r\n  F17: 128,\r\n  F18: 129,\r\n  F19: 130,\r\n  F20: 131,\r\n  F21: 132,\r\n  F22: 133,\r\n  F23: 134,\r\n  F24: 135,\r\n  NumLock: 144,\r\n  Scroll: 145,\r\n  LShiftKey: 160,\r\n  RShiftKey: 161,\r\n  LControlKey: 162,\r\n  RControlKey: 163,\r\n  LMenu: 164,\r\n  RMenu: 165,\r\n  BrowserBack: 166,\r\n  BrowserForward: 167,\r\n  BrowserRefresh: 168,\r\n  BrowserStop: 169,\r\n  BrowserSearch: 170,\r\n  BrowserFavorites: 171,\r\n  BrowserHome: 172,\r\n  VolumeMute: 173,\r\n  VolumeDown: 174,\r\n  VolumeUp: 175,\r\n  MediaNextTrack: 176,\r\n  MediaPreviousTrack: 177,\r\n  MediaStop: 178,\r\n  MediaPlayPause: 179,\r\n  LaunchMail: 180,\r\n  SelectMedia: 181,\r\n  LaunchApplication1: 182,\r\n  LaunchApplication2: 183,\r\n  OemSemicolon: 186,\r\n  Oem1: 186,\r\n  Oemplus: 187,\r\n  Oemcomma: 188,\r\n  OemMinus: 189,\r\n  OemPeriod: 190,\r\n  OemQuestion: 191,\r\n  Oem2: 191,\r\n  Oemtilde: 192,\r\n  Oem3: 192,\r\n  OemOpenBrackets: 219,\r\n  Oem4: 219,\r\n  OemPipe: 220,\r\n  Oem5: 220,\r\n  OemCloseBrackets: 221,\r\n  Oem6: 221,\r\n  OemQuotes: 222,\r\n  Oem7: 222,\r\n  Oem8: 223,\r\n  OemBackslash: 226,\r\n  Oem102: 226,\r\n  ProcessKey: 229,\r\n  Packet: 231,\r\n  Attn: 246,\r\n  Crsel: 247,\r\n  Exsel: 248,\r\n  EraseEof: 249,\r\n  Play: 250,\r\n  Zoom: 251,\r\n  NoName: 252,\r\n  Pa1: 253,\r\n  OemClear: 254,\r\n  KeyCode: 65535,\r\n  Shift: 65536,\r\n  Control: 131072,\r\n  Alt: 262144\r\n};\r\n\r\nexport function altKeyPressed(keyCode) {\r\n  return keyCode === Keys.Menu || keyCode === (Keys.RButton | Keys.ShiftKey);\r\n}\r\n\r\nexport function octaveKeyPressed(keyCode) {\r\n  switch (keyCode) {\r\n    case Keys.Z:\r\n      return -1;\r\n    case Keys.X:\r\n      return +1;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/**\r\n* @param {number} keyCode\r\n*/\r\nexport function validateKeyCode(keyCode) {\r\n  switch (keyCode) {\r\n    //Keyboard Keys\r\n    case Keys.Q:\r\n    case Keys.A:\r\n    case Keys.W:\r\n    case Keys.S:\r\n    case Keys.E:\r\n    case Keys.D:\r\n    case Keys.F:\r\n    case Keys.T:\r\n    case Keys.G:\r\n    case Keys.Y:\r\n    case Keys.H:\r\n    case Keys.U:\r\n    case Keys.J:\r\n    case Keys.K:\r\n    case Keys.O:\r\n    case Keys.L:\r\n    case Keys.P:\r\n    case Keys.OemSemicolon:\r\n    case Keys.Oemtilde:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\nconst midiMapping = {\r\n  //Keyboard Keys\r\n  [Keys.A]: 60,\r\n  [Keys.W]: 61,\r\n  [Keys.S]: 62,\r\n  [Keys.E]: 63,\r\n  [Keys.D]: 64,\r\n  [Keys.F]: 65,\r\n  [Keys.T]: 66,\r\n  [Keys.G]: 67,\r\n  [Keys.Y]: 68,\r\n  [Keys.H]: 69,\r\n  [Keys.U]: 70,\r\n  [Keys.J]: 71,\r\n  [Keys.K]: 72,\r\n  [Keys.O]: 73,\r\n  [Keys.L]: 74,\r\n  [Keys.P]: 75,\r\n  [Keys.OemSemicolon]: 76,\r\n  [Keys.Oemtilde]: 77,\r\n};\r\n\r\n/**\r\n* @param {number} keyCode\r\n*/\r\nexport function mapKeyCodeToMidi(keyCode) {\r\n  return midiMapping[keyCode];\r\n}\r\n\r\nexport const midiToKeyCodeMapping = reverseDict(midiMapping);\r\n","// @ts-check\r\n\r\n/**\r\n * @param {number} value\r\n * @param {number} max\r\n * @param {number} min\r\n */\r\nexport function clampNumber(value, max = 1, min = 0) {\r\n  return Math.min(Math.max(value, min), max);\r\n}","import { InvertedParam, InvertedMetaParam } from '../types';\r\n\r\nexport const setParamValueFactory = (actionType) => {\r\n  return value => ({\r\n    type: actionType,\r\n    payload: {\r\n      value\r\n    }\r\n  });\r\n};\r\n\r\nexport const setAllParamsActionFactory = (actionType) => {\r\n  return data => ({\r\n    type: actionType,\r\n    payload: data\r\n  });\r\n};\r\n\r\nexport const userEventActionFactory = (actionType) => {\r\n  return payload => ({\r\n    type: actionType,\r\n    payload\r\n  });\r\n};\r\n\r\nexport const createStoreHook = (param, actionCreator, [min, max] = [null, null]) => {\r\n  return [(state) => state[InvertedParam[param]], actionCreator, [min, max]];\r\n};\r\n\r\nexport const createMetaStoreHook = (param, actionCreator, [min, max] = [null, null]) => {\r\n  return [(state) => state.meta[InvertedMetaParam[param]], actionCreator, [min, max]];\r\n};\r\n","export const EVENT_KEY_DOWN              = 'EVENT_KEY_DOWN';\r\nexport const EVENT_KEY_UP                = 'EVENT_KEY_UP';\r\nexport const EVENT_OCTAVE_INCREMENT      = 'EVENT_OCTAVE_INCREMENT';\r\nexport const SET_ALL_PARAMS              = 'SET_ALL_PARAMS';\r\nexport const ALT_KEY_PRESSED             = 'ALT_KEY_PRESSED';\r\nexport const ALT_KEY_RELEASED            = 'ALT_KEY_RELEASED';\r\n\r\nexport const SET_PARAM_AMP_ATTACK        = 'SET_PARAM_AMP_ATTACK';\r\nexport const SET_PARAM_AMP_DECAY         = 'SET_PARAM_AMP_DECAY';\r\nexport const SET_PARAM_AMP_SUSTAIN       = 'SET_PARAM_AMP_SUSTAIN';\r\nexport const SET_PARAM_AMP_RELEASE       = 'SET_PARAM_AMP_RELEASE';\r\nexport const SET_PARAM_AMP_LFO_RATE      = 'SET_PARAM_AMP_LFO_RATE';\r\nexport const SET_PARAM_AMP_LFO_WIDTH     = 'SET_PARAM_AMP_LFO_WIDTH';\r\n\r\nexport const SET_PARAM_OSC_PHASE         = 'SET_PARAM_OSC_PHASE';\r\nexport const SET_PARAM_OSC_WAVEFUNCTION  = 'SET_PARAM_OSC_WAVEFUNCTION';\r\nexport const SET_PARAM_OSC_GAIN          = 'SET_PARAM_OSC_GAIN';\r\n\r\nexport const SET_PARAM_DELAY_LENGTH      = 'SET_PARAM_DELAY_LENGTH';\r\nexport const SET_PARAM_DELAY_WET         = 'SET_PARAM_DELAY_WET';\r\n\r\nexport const SET_PARAM_REVERB_LENGTH     = 'SET_PARAM_REVERB_LENGTH';\r\n\r\nexport const SET_PARAM_PITCH_LFO_RATE    = 'SET_PARAM_PITCH_LFO_RATE';\r\nexport const SET_PARAM_PITCH_LFO_WIDTH   = 'SET_PARAM_PITCH_LFO_WIDTH';\r\n\r\nexport const SET_ENABLE_FILTER_EG        = 'SET_ENABLE_FILTER_EG';\r\nexport const SET_PARAM_FILTER_EG_ATTACK  = 'SET_PARAM_FILTER_EG_ATTACK';\r\nexport const SET_PARAM_FILTER_EG_RELEASE = 'SET_PARAM_FILTER_EG_RELEASE';\r\nexport const SET_PARAM_FILTER_EG_FLOOR   = 'SET_PARAM_FILTER_EG_FLOOR';\r\nexport const SET_PARAM_FILTER_EG_CEILING = 'SET_PARAM_FILTER_EG_CEILING';\r\n\r\nexport const SET_PARAM_FILTER_LFO_RATE   = 'SET_PARAM_FILTER_LFO_RATE';\r\nexport const SET_PARAM_FILTER_LFO_WIDTH  = 'SET_PARAM_FILTER_LFO_WIDTH';\r\nexport const SET_PARAM_MASTER_LEVEL      = 'SET_PARAM_MASTER_LEVEL';\r\n\r\nexport const SET_PARAM_FILTER_CUTOFF     = 'SET_PARAM_FILTER_CUTOFF';\r\nexport const SET_PARAM_2ND_HARM_GAIN     = 'SET_PARAM_2ND_HARM_GAIN';\r\nexport const SET_META_PARAM_ALT_ENABLED  = 'SET_META_PARAM_ALT_ENABLED';","import * as types from '../actionTypes';\r\nimport { setAllParamsActionFactory, userEventActionFactory } from './helper';\r\n\r\nexport const setAllParams = setAllParamsActionFactory(types.SET_ALL_PARAMS);\r\n\r\nexport const keyDownEvent = userEventActionFactory(types.EVENT_KEY_DOWN);\r\nexport const keyUpEvent   = userEventActionFactory(types.EVENT_KEY_UP);\r\n","// @ts-check\r\nimport { InvertedParam, InvertedMetaParam } from './types';\r\n\r\nexport const getParamSetter = (state, action, param, refresh = false) => {\r\n  const { meta, ...params } = state;\r\n  return {\r\n    ...state,\r\n    meta: {\r\n      ...meta,\r\n      prevState: params,\r\n      refresh\r\n    },\r\n    [InvertedParam[param]]: action.payload.value,\r\n  };\r\n};\r\nexport const getMetaParamSetter = (state, value, param, increment = false) => {\r\n  const { meta } = state;\r\n  const _value = increment\r\n    ? value + (state.meta[InvertedMetaParam[param]] || 0)\r\n    : value;\r\n  return {\r\n    ...state,\r\n    meta: {\r\n      ...meta,\r\n      [InvertedMetaParam[param]]: _value,\r\n    }\r\n  };\r\n};","// @ts-check\r\n\r\nimport * as types from './actionTypes';\r\nimport { getParamSetter, getMetaParamSetter } from './helper';\r\nimport { Param, MetaParam } from './types';\r\n\r\nexport function rootReducer(state, action) {\r\n  if (typeof state === 'undefined') {\r\n    return {};\r\n  }\r\n  const reducers = [\r\n    AmpEnvReducer,\r\n    FilterEnvReducer,\r\n    FilterTouchReducer,\r\n    OscReducer,\r\n    MasterReducer,\r\n    MetaReducer,\r\n    PitchReducer,\r\n  ];\r\n  return reducers.reduce((state, reducer) => reducer(action, state), state);\r\n}\r\n\r\nfunction MetaReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_ALL_PARAMS:\r\n      return { ...state, ...action.payload };\r\n    case types.ALT_KEY_PRESSED:\r\n      return getMetaParamSetter(state, true, MetaParam.altEnabled);\r\n    case types.ALT_KEY_RELEASED:\r\n      return getMetaParamSetter(state, false, MetaParam.altEnabled);\r\n    case types.EVENT_OCTAVE_INCREMENT:\r\n      return getMetaParamSetter(state, action.payload, MetaParam.kbOctave, true);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction AmpEnvReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_PARAM_AMP_ATTACK:\r\n      return getParamSetter(state, action, Param.Attack, true);\r\n    case types.SET_PARAM_AMP_DECAY:\r\n      return getParamSetter(state, action, Param.Decay, true);\r\n    case types.SET_PARAM_AMP_SUSTAIN:\r\n      return getParamSetter(state, action, Param.Sustain, true);\r\n    case types.SET_PARAM_AMP_RELEASE:\r\n      return getParamSetter(state, action, Param.Release, true);\r\n    case types.SET_PARAM_AMP_LFO_RATE:\r\n      return getParamSetter(state, action, Param.AmpLFOrate);\r\n    case types.SET_PARAM_AMP_LFO_WIDTH:\r\n      return getParamSetter(state, action, Param.AmpLFOwidth);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction FilterEnvReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_ENABLE_FILTER_EG:\r\n      return getParamSetter(state, action, Param.LPFenvelope, true);\r\n    case types.SET_PARAM_FILTER_EG_ATTACK:\r\n      return getParamSetter(state, action, Param.LPFattack, true);\r\n    case types.SET_PARAM_FILTER_EG_RELEASE:\r\n      return getParamSetter(state, action, Param.LPFrelease, true);\r\n    case types.SET_PARAM_FILTER_EG_FLOOR:\r\n      return getParamSetter(state, action, Param.LPFfloor);\r\n    case types.SET_PARAM_FILTER_EG_CEILING:\r\n      return getParamSetter(state, action, Param.LPFceiling);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction FilterTouchReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_PARAM_FILTER_CUTOFF:\r\n      return getParamSetter(state, action, Param.LPF);\r\n    case types.SET_PARAM_2ND_HARM_GAIN:\r\n      return getParamSetter(state, action, Param.Harmonic2Gain);\r\n    case types.SET_META_PARAM_ALT_ENABLED:\r\n      return getMetaParamSetter(state, action.payload.value, MetaParam.altEnabled);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction MasterReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_PARAM_FILTER_LFO_RATE:\r\n      return getParamSetter(state, action, Param.LPFmodrate);\r\n    case types.SET_PARAM_FILTER_LFO_WIDTH:\r\n      return getParamSetter(state, action, Param.LPFwidth);\r\n    case types.SET_PARAM_MASTER_LEVEL:\r\n      return getParamSetter(state, action, Param.Gain);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction OscReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_PARAM_OSC_PHASE:\r\n      return getParamSetter(state, action, Param.HarmonicPhase);\r\n    case types.SET_PARAM_OSC_WAVEFUNCTION:\r\n      return getParamSetter(state, action, Param.WFunction);\r\n    case types.SET_PARAM_OSC_GAIN:\r\n      return getParamSetter(state, action, Param.GeneralAtten);\r\n    case types.SET_PARAM_DELAY_WET:\r\n      return getParamSetter(state, action, Param.DelayWet);\r\n    case types.SET_PARAM_REVERB_LENGTH:\r\n      return getParamSetter(state, action, Param.ReverbWet);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n\r\nfunction PitchReducer(action, state) {\r\n  switch (action.type) {\r\n    case types.SET_PARAM_PITCH_LFO_RATE:\r\n      return getParamSetter(state, action, Param.Pitchmod);\r\n    case types.SET_PARAM_PITCH_LFO_WIDTH:\r\n      return getParamSetter(state, action, Param.PitchmodWidth);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","// @ts-check\r\n\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createEpicMiddleware, combineEpics, ofType } from 'redux-observable';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Observable, Subject, BehaviorSubject } from 'rxjs';\r\nimport { filter, shareReplay, map, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { rootReducer } from './redux/reducers';\r\nimport { Param, InvertedMetaParam, MetaParam } from './redux/types';\r\nimport { publishParam } from './workerActions';\r\nimport { EVENT_KEY_UP, EVENT_KEY_DOWN, ALT_KEY_PRESSED, ALT_KEY_RELEASED, EVENT_OCTAVE_INCREMENT } from './redux/actionTypes';\r\nimport { altKeyPressed, octaveKeyPressed } from './common/DataExtensions';\r\n\r\nconst epicMiddleware = createEpicMiddleware();\r\n\r\n/**\r\n * @param {{type: string, payload: any}} ev\r\n */\r\nconst handleTouchEnable = ev => {\r\n  const octaveKey = octaveKeyPressed(ev.payload && ev.payload.keyCode);\r\n  if (octaveKey && ev.type === EVENT_KEY_DOWN) {\r\n    store.dispatch({\r\n      type: EVENT_OCTAVE_INCREMENT,\r\n      payload: octaveKey\r\n    });\r\n  }\r\n  if (altKeyPressed(ev.payload && ev.payload.keyCode)) {\r\n    store.dispatch({\r\n      type: ev.type === EVENT_KEY_DOWN ? ALT_KEY_PRESSED : ALT_KEY_RELEASED,\r\n      payload: {}\r\n    });\r\n  }\r\n};\r\n\r\n/** @type Subject<{type: string, payload: {keyCode: number, oct?: number}}> */\r\nconst keyEventsSubject = new Subject();\r\nexport const keyEvents$ = keyEventsSubject.asObservable();\r\n\r\nconst octaveSubject = new BehaviorSubject(0);\r\n\r\n/**\r\n * @param {Observable<{type: string, payload: any}>} action$ \r\n */\r\nconst rootEpic = action$ => {\r\n  const keyDown$ = action$.pipe(\r\n    filter(action => action.type === EVENT_KEY_UP || action.type === EVENT_KEY_DOWN),\r\n  );\r\n  keyDown$.subscribe(handleTouchEnable);\r\n  keyDown$.subscribe(keyEventsSubject);\r\n\r\n  const octaveChanged$ = action$.pipe(\r\n    ofType(EVENT_OCTAVE_INCREMENT),\r\n    map(action => action.payload)\r\n  );\r\n  octaveChanged$.subscribe(octaveSubject);\r\n\r\n  return new Observable(() => {});\r\n};\r\n\r\nexport function configureStore(preloadedState) {\r\n  const epics = [\r\n    rootEpic,\r\n  ];\r\n  const composedEpics = combineEpics(...epics);\r\n\r\n  const middlewares = [\r\n    epicMiddleware,\r\n  ];\r\n  const middlewareEnhancer = applyMiddleware(...middlewares);\r\n\r\n  const enhancers = [\r\n    middlewareEnhancer\r\n  ];\r\n  const composedEnhancers = composeWithDevTools(...enhancers);\r\n\r\n  const store = createStore(rootReducer, preloadedState, composedEnhancers);\r\n\r\n  epicMiddleware.run(composedEpics);\r\n\r\n  return store;\r\n}\r\n\r\nconst initialState = {\r\n  meta: {\r\n    prevState: {},\r\n    [InvertedMetaParam[MetaParam.kbOctave]] : -1\r\n  }\r\n};\r\n\r\nexport const store = configureStore(initialState);\r\n\r\nexport const store$ = new Observable(subscriber => store.subscribe(() => subscriber.next(store.getState())));\r\n\r\nstore$.subscribe(({ meta, ...state }) => {\r\n  const prevParams = Object.keys(Param).map(paramKey => `${paramKey},${meta.prevState[paramKey]}`);\r\n  const prevSet = new Set(prevParams);\r\n\r\n  const params = Object.keys(Param).map(paramKey => `${paramKey},${state[paramKey]}`);\r\n  const changedParams = params.filter(param => !prevSet.has(param));\r\n\r\n  changedParams.forEach(stateKeyJoined => {\r\n    const stateKey = stateKeyJoined.split(',')[0];\r\n    const paramIden = Param[stateKey];\r\n    if (typeof paramIden !== 'undefined') {\r\n      publishParam(paramIden, state, meta || { prevState: {} });\r\n    }\r\n  });\r\n});\r\n\r\nconst replayStore$ = store$.pipe(shareReplay());\r\n\r\nexport function observerSubscribe(callback, selector = null) {\r\n  const mappedStore$ = selector\r\n    ? replayStore$.pipe(distinctUntilChanged((x, y) => selector(x) === selector(y)))\r\n    : replayStore$;\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const actionSub = mappedStore$.subscribe(state => callback(state));\r\n  return () => actionSub.unsubscribe();\r\n}\r\n\r\nexport { waveform$ } from './workerActions';\r\n\r\nexport default store;\r\n\r\n","// @ts-check\r\n\r\nimport { InvertedParam, InvertedMetaParam, MetaParam } from './redux/types';\r\nimport { setAllParams, keyDownEvent, keyUpEvent } from './redux/actions/MetaActions';\r\nimport { validateKeyCode } from './common/DataExtensions';\r\nimport { store, keyEvents$, observerSubscribe } from './store';\r\nimport * as types from './redux/actionTypes';\r\n// eslint-disable-next-line no-unused-vars\r\nimport { Observable, Subscription, Subject, BehaviorSubject } from 'rxjs';\r\nimport { filter, take, map, shareReplay } from 'rxjs/operators';\r\nimport { ofType } from 'redux-observable';\r\n\r\n/**\r\n * @type {{ \r\n *  hasStarted: boolean, \r\n *  synthNode: AudioWorkletNode, \r\n *  synthNodePort$: Observable<any>, \r\n *  synthWaveformSubscription: Subscription\r\n *  dumpParamsSubscription: Subscription\r\n * }}\r\n */\r\nexport const initState = {\r\n  hasStarted: false,\r\n  synthNode: null,\r\n  synthNodePort$: null,\r\n  synthWaveformSubscription: null,\r\n  dumpParamsSubscription: null\r\n};\r\n//could await this\r\n\r\nconst presetPromptKey = { key: '.', keyCode: 190 };\r\n\r\nconst WorkerActions = {\r\n  MODULE: 'MODULE',\r\n  FROM_MODULE_TYPE: 'FROM_MODULE_TYPE',\r\n  FROM_MODULE_BYTE_BUFFER: 'FROM_MODULE_BYTE_BUFFER',\r\n  USE_MODULE_INSTANCE: 'USE_MODULE_INSTANCE',\r\n  DUMP_PARAMS: 'DUMP_PARAMS',\r\n  REFRESH_EG: 'REFRESH_EG',\r\n  SET_PRESET: 'SET_PRESET',\r\n  GET_PARAM: 'GET_PARAM',\r\n  SET_PARAM: 'SET_PARAM',\r\n  KEY_DOWN: 'KEY_DOWN',\r\n  KEY_UP: 'KEY_UP',\r\n};\r\n\r\nconst WorkerActionFactory = {\r\n  sendModule: (module) => ({ type: WorkerActions.FROM_MODULE_TYPE, data: module }),\r\n  sendModuleAsBytes: (intance) => ({ type: WorkerActions.FROM_MODULE_BYTE_BUFFER, data: intance }),\r\n  sendModuleInstance: (intance) => ({ type: WorkerActions.USE_MODULE_INSTANCE, data: intance }),\r\n  sendKeyDown: (keyEvent) => ({ type: WorkerActions.KEY_DOWN, data: keyEvent }),\r\n  sendKeyUp: (keyCode) => ({ type: WorkerActions.KEY_UP, data: keyCode }),\r\n  getState: (paramIden) => ({ type: WorkerActions.GET_PARAM, data: paramIden }),\r\n  setState: (paramData) => ({ type: WorkerActions.SET_PARAM, data: paramData }),\r\n  dumpState: () => ({ type: WorkerActions.DUMP_PARAMS, data: { dumpAll: true } }),\r\n  setPreset: (presetLine) => ({ type: WorkerActions.SET_PRESET, data: presetLine }),\r\n  triggerRefresh: () => ({ type: WorkerActions.REFRESH_EG, data: {} }),\r\n};\r\n\r\n/**\r\n * @param {AudioWorkletNode} workletNode\r\n * @param {{ type: string; data: any; }} workerAction\r\n */\r\nfunction postWorkerAction(workletNode, workerAction) {\r\n  workletNode.port.postMessage(workerAction);\r\n}\r\n\r\nasync function getModuleBytes() {\r\n  const response = await fetch('wasm-synth/citysynth_wasm_bg.wasm');\r\n  return await response.arrayBuffer();\r\n}\r\n\r\nexport async function getWasmModule() {\r\n  if (initState.synthNode) {\r\n    return;\r\n  }\r\n  // @ts-ignore\r\n  const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n  const actx = new AudioContext();\r\n  await actx.audioWorklet.addModule('audio.js');\r\n  const moduleBytes = await getModuleBytes();\r\n  const synthNode = new AudioWorkletNode(actx, 'city-rust');\r\n  synthNode.connect(actx.destination);\r\n  initState.synthNode = synthNode;\r\n  const port$ = new Observable((subscriber) => {\r\n    synthNode.port.onmessage = (ev) => {\r\n      subscriber.next({ message: ev, error: null });\r\n    };\r\n\r\n    synthNode.port.onmessageerror = (ev) => {\r\n      subscriber.next({ error: ev, message: null });\r\n    };\r\n\r\n    return () => {\r\n      synthNode.port.onmessage = null;\r\n      synthNode.port.onmessageerror = null;\r\n    };\r\n  }).pipe(shareReplay());\r\n  const moduleReadyPromise = new Promise(ok => {\r\n    port$.pipe(\r\n      filter(next => next.error === null),\r\n      filter(({ message }) => message.data.type === 'MODULE_READY'),\r\n      take(1)\r\n    ).subscribe(() => ok());\r\n  });\r\n  postWorkerAction(synthNode, WorkerActionFactory.sendModuleAsBytes(moduleBytes));\r\n  await moduleReadyPromise;\r\n  setupInitState(port$);\r\n  await syncParamsState();\r\n}\r\n\r\nconst waveformSubject = new Subject();\r\nexport const waveform$ = waveformSubject.asObservable();\r\n\r\nconst dumpParamsSubject = new Subject();\r\n\r\nfunction setupInitState(port$) {\r\n  initState.synthNodePort$ = port$.pipe(\r\n    filter(next => next.error === null),\r\n    map(next => next.message)\r\n  );\r\n\r\n  initState.synthWaveformSubscription = port$.pipe(\r\n    filter(next => next.error === null),\r\n    filter(({ message }) => message.data.type === 'WAVEFORM_PUSH'),\r\n    map(({ message }) => message.data.samples),\r\n  ).subscribe(samples => waveformSubject.next(samples));\r\n\r\n  initState.dumpParamsSubscription = initState.synthNodePort$.pipe(\r\n    filter(evt => evt.data.type === 'DUMP_PARAMS_CALLBACK'),\r\n    filter(evt => typeof evt.data.dump !== 'undefined')\r\n  ).subscribe(samples => dumpParamsSubject.next(samples));\r\n}\r\n\r\nasync function getAllParamValues() {\r\n  return await new Promise((resolve, reject) => {\r\n    try {\r\n      const { synthNode } = initState;\r\n      if (synthNode) {\r\n        dumpParamsSubject.pipe(\r\n          take(1)\r\n        ).subscribe(({ data }) => {\r\n          resolve(data.dump);\r\n        });\r\n        postWorkerAction(synthNode, WorkerActionFactory.dumpState());\r\n      } else {\r\n        reject('no synthNode found');\r\n      }\r\n    }\r\n    catch (ex) {\r\n      reject(ex);\r\n    }\r\n  });\r\n}\r\n\r\nasync function syncParamsState() {\r\n  const dump = await getAllParamValues();\r\n  store.dispatch(setAllParams(dump));\r\n}\r\n\r\nexport function publishParam(paramIden, state, meta) {\r\n  const param = InvertedParam[paramIden];\r\n  const { synthNode } = initState;\r\n  if (synthNode && typeof state[param] !== 'undefined' && meta.prevState[param] !== state[param]) {\r\n    postWorkerAction(synthNode, WorkerActionFactory.setState({ param, value: state[param] }));\r\n    // TODO: replace with forward/inverse param type pairing\r\n    if (meta[InvertedMetaParam[MetaParam.refresh]]) {\r\n      postWorkerAction(synthNode, WorkerActionFactory.triggerRefresh());\r\n    }\r\n  }\r\n}\r\n\r\nexport async function postPresetLine(presetLine) {\r\n  const { synthNode } = initState;\r\n  if (synthNode && presetLine) {\r\n    postWorkerAction(synthNode, WorkerActionFactory.setPreset(presetLine));\r\n    postWorkerAction(synthNode, WorkerActionFactory.triggerRefresh());\r\n    await syncParamsState();\r\n  }\r\n}\r\n\r\n/**\r\n * @param {{keyCode: number, oct?: number}} evt\r\n */\r\nconst handleKeyDown = ({ keyCode, oct }) => {\r\n  const { synthNode } = initState;\r\n  if (!validateKeyCode(keyCode)) {\r\n    return;\r\n  }\r\n  postWorkerAction(synthNode, WorkerActionFactory.sendKeyDown({ keyCode, oct: oct || 0 }));\r\n};\r\n\r\n/**\r\n * @param {{keyCode: number}} evt\r\n */\r\nconst handleKeyUp = ({ keyCode }) => {\r\n  const { synthNode } = initState;\r\n  if (keyCode === presetPromptKey.keyCode) {\r\n    const samplePresetLine = '56:T-Organic:318|a:1;d:94;s:0.86;r:2;h:2;hc:0.2190476;hp:0;w:2;hw:0;b:-1;lpf:13441.8;lfo:0;prate:0;pwidth:0;arate:30;awidth:0;lwidth:500;la:5;lr:5;lf:5;lc:5000;delay:120;dwet:0.2057;rwet:0.04;filter:0;lpfenv:0;sub:0.3668478';\r\n    const presetLine = prompt('preset data: ', samplePresetLine);\r\n    postWorkerAction(synthNode, WorkerActionFactory.setPreset(presetLine));\r\n    syncParamsState();\r\n    return;\r\n  }\r\n  if (!validateKeyCode(keyCode)) {\r\n    return;\r\n  }\r\n  postWorkerAction(synthNode, WorkerActionFactory.sendKeyUp(keyCode));\r\n};\r\n\r\nconst keyDown$ = keyEvents$.pipe(\r\n  ofType(types.EVENT_KEY_DOWN),\r\n  map(action => action.payload)\r\n);\r\n\r\nkeyDown$.subscribe(keyEvt => {\r\n  const { synthNode } = initState;\r\n  if (synthNode) {\r\n    handleKeyDown(keyEvt);\r\n  }\r\n});\r\n\r\nconst keyUp$ = keyEvents$.pipe(\r\n  ofType(types.EVENT_KEY_UP),\r\n  map(action => action.payload)\r\n);\r\n\r\nkeyUp$.subscribe(({ keyCode }) => {\r\n  const { synthNode } = initState;\r\n  if (synthNode) {\r\n    // @ts-ignore\r\n    handleKeyUp({ keyCode });\r\n  }\r\n});\r\n\r\nconst octaveSubject = new BehaviorSubject(0);\r\nconst octaveSelector = store => store.meta[InvertedMetaParam[MetaParam.kbOctave]] || 0;\r\nobserverSubscribe(store => {\r\n  octaveSubject.next(octaveSelector(store));\r\n}, octaveSelector);\r\n\r\nwindow.addEventListener('keydown', (evt) => {\r\n  const { synthNode } = initState;\r\n  if (synthNode && !evt.repeat) {\r\n    store.dispatch(keyDownEvent({ keyCode: evt.keyCode, oct: octaveSubject.getValue() }));\r\n  }\r\n});\r\n\r\nwindow.addEventListener('keyup', (evt) => {\r\n  const { synthNode } = initState;\r\n  if (synthNode && !evt.repeat) {\r\n    store.dispatch(keyUpEvent({ keyCode: evt.keyCode }));\r\n  }\r\n});\r\n","import { midiToKeyCodeMapping } from '../../../common';\r\nimport * as workerActions from '../../../workerActions';\r\nimport { keyUpEvent, keyDownEvent } from '../../../redux/actions/MetaActions';\r\nimport store from '../../../store';\r\n\r\n//@ts-check\r\n/* Copyright 2017 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n==============================================================================*/\r\nconst offsets = [0, 0.5, 1, 1.5, 2, 3, 3.5, 4, 4.5, 5, 5.5, 6];\r\nconst minNote = 60;\r\nconst maxNote = 77;\r\nexport class KeyboardElement {\r\n  /**\r\n   * @param {Element} container\r\n   */\r\n  constructor(container) {\r\n    this.container = container;\r\n    this.keys = {};\r\n    this.resize();\r\n    this.notes = {};\r\n  }\r\n\r\n  resize() {\r\n    // clear the previous ones.\r\n    this.keys = {};\r\n    this.container.innerHTML = '';\r\n    // each of the keys.\r\n    const keyWidth = 1 / 52;\r\n    for (let i = minNote; i <= maxNote; i++) {\r\n      const key = document.createElement('div');\r\n      key.classList.add('key');\r\n      const isSharp = ([1, 3, 6, 8, 10].indexOf(i % 12) !== -1);\r\n      key.classList.add(isSharp ? 'black' : 'white');\r\n      this.container.appendChild(key);\r\n      // position the element\r\n      const noteOctave = Math.floor(i / 12) - Math.floor(minNote / 12);\r\n      const offset = offsets[i % 12] + noteOctave * 7 - 5;\r\n      key.style.width = keyWidth * 100 + '%';\r\n      key.style.left = (offset * keyWidth * 100 + 10) + '%';\r\n      key.id = i.toString();\r\n\r\n      const mouseDownHandler = ev => this.handleMouse(ev, true, i);\r\n      key.addEventListener('mousedown', mouseDownHandler);\r\n      const mouseUpHandler = ev => this.handleMouse(ev, false, i);\r\n      key.addEventListener('mouseup', mouseUpHandler);\r\n\r\n      const fill = document.createElement('div');\r\n      fill.classList.add('fill');\r\n      key.appendChild(fill);\r\n      this.keys[i] = key;\r\n    }\r\n  }\r\n\r\n  handleMouse(ev, isDown, idx) {\r\n    const actionCreator = isDown ? keyDownEvent : keyUpEvent;\r\n    const keyCode = +midiToKeyCodeMapping[idx];\r\n    store.dispatch(actionCreator({keyCode, oct: -1}));\r\n  }\r\n\r\n  /**\r\n   * @param {number} noteNum\r\n   */\r\n  keyDown(noteNum) {\r\n    if (noteNum in this.keys) {\r\n      const key = this.keys[noteNum];\r\n      const note = new Note(key.querySelector('.fill'));\r\n      if (!this.notes[noteNum]) {\r\n        this.notes[noteNum] = [];\r\n      }\r\n      this.notes[noteNum].push(note);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} noteNum\r\n   */\r\n  keyUp(noteNum) {\r\n    if (noteNum in this.keys) {\r\n      if (!(this.notes[noteNum] && this.notes[noteNum].length)) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn('note off before note on');\r\n      }\r\n      else {\r\n        this.notes[noteNum].shift().noteOff();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass Note {\r\n  /**\r\n   * @param {Element} element\r\n   */\r\n  constructor(element) {\r\n    this.element = element;\r\n    this.element.classList.add('active');\r\n  }\r\n\r\n  noteOff() {\r\n    this.element.classList.remove('active');\r\n  }\r\n}\r\n","//@ts-check\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Image } from 'react-konva';\r\nimport useImage from 'use-image';\r\n\r\nconst elementCache = {};\r\n\r\nconst getCacheKey = ({ dir, componentScope, assetName, ext }) =>\r\n  dir + '|' + componentScope + '|' + assetName + '|' + ext;\r\n\r\nconst getImageFromSrc = ({ dir, componentScope, assetName, ext }, performNoOp) =>\r\n  getImage(dir, componentScope, assetName, ext, performNoOp);\r\n\r\n/**\r\n * @param {{\r\n *  componentScope: string;\r\n *  assetName: string;\r\n *  assetExt: string;\r\n *  resDirector: string;\r\n *  onInfoReady: (imgInfo: {w: number, h: number}) => void\r\n * }} props\r\n */\r\nexport const AssetImage = (props) => {\r\n  const { componentScope, assetName, assetExt, resDirector, onInfoReady, ...others } = props;\r\n  const ext = (typeof assetExt === 'string' && assetExt) || 'png';\r\n  const dir = (typeof resDirector === 'string' && resDirector) || 'synth';\r\n\r\n  const assetPath = { dir, componentScope, assetName, ext };\r\n\r\n  const cacheKey = getCacheKey(assetPath);\r\n  const cached = elementCache[cacheKey];\r\n\r\n  const performNoOpNetworkAction = typeof cached !== 'undefined';\r\n  const image = (getImageFromSrc(assetPath, performNoOpNetworkAction) || [])[0] || cached;\r\n\r\n  if (!performNoOpNetworkAction && image) {\r\n    elementCache[cacheKey] = image;\r\n  }\r\n\r\n  if (image) {\r\n    const imgInfo = getImageInfo(image);\r\n    typeof (onInfoReady) === 'function' && onInfoReady(imgInfo);\r\n  }\r\n\r\n  return <Image image={image} {...others} />;\r\n};\r\n\r\nAssetImage.propTypes = {\r\n  componentScope: PropTypes.string,\r\n  assetName: PropTypes.string,\r\n  assetExt: PropTypes.string,\r\n  resDirector: PropTypes.string,\r\n  onInfoReady: PropTypes.func\r\n};\r\n\r\n/**\r\n * @param {string} dir\r\n * @param {string} componentScope\r\n * @param {string} assetName\r\n * @param {string} ext\r\n */\r\nfunction getImage(dir, componentScope, assetName, ext, performNoOp) {\r\n  // eslint-disable-next-line no-undef\r\n  const url = `${process.env.PUBLIC_URL}/res/${dir}/assets.${componentScope}/${assetName}.${ext}`;\r\n  return useImage(performNoOp ? null : url);\r\n}\r\n\r\n\r\n/**\r\n * @param {HTMLImageElement} image\r\n */\r\nfunction getImageInfo(image) {\r\n  const w = image.naturalWidth;\r\n  const h = image.naturalHeight;\r\n\r\n  return { w, h };\r\n}","import React from 'react';\r\nimport { AssetImage } from './assets';\r\n\r\nexport function PanelDivider(props) {\r\n  const { ...other } = props;\r\n  return <AssetImage componentScope={'PanelDivider'} assetName={'pnl-div-vline'} {...other} />;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Layer, Stage, Group } from 'react-konva';\r\nimport { AssetImage } from '../features';\r\n\r\nconst BackgroundImage = () => {\r\n  return <AssetImage componentScope={'BaseWindow'} assetName={'base-bg-img'} />;\r\n};\r\n\r\nexport const BaseWindow = (props) => {\r\n  return (\r\n    <Stage width={925} height={528}>\r\n      <Layer>\r\n        <Group>\r\n          <BackgroundImage />\r\n          <Group y={3}>\r\n            {props.children}\r\n          </Group>\r\n        </Group>\r\n      </Layer>\r\n    </Stage>\r\n  );\r\n};\r\n\r\nBaseWindow.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};","/* eslint-disable react/prop-types */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { AssetImage } from '../../features';\r\nimport { rgbaToHexCode } from '../../../../../common';\r\nimport { Ellipse } from 'react-konva';\r\n\r\nexport const BackgroundImage = (props) => {\r\n  const { ...other } = props;\r\n  return <AssetImage componentScope={'Dial'} assetName={'dial-bg-markings'} {...other} />;\r\n};\r\nBackgroundImage.imgWidthPx = 57;\r\nBackgroundImage.imgHeightPx = 65;\r\n\r\nexport const RoundDialImage = (props) => {\r\n  const { ...other } = props;\r\n  return <AssetImage componentScope={'Dial'} assetName={'round-blank-dial'} {...other} />;\r\n};\r\nRoundDialImage.imgWidthPx = 57;\r\nRoundDialImage.imgHeightPx = 65;\r\n\r\nexport const DialMarkerImage = (props) => {\r\n  const { x, y, ...other } = props;\r\n  const offset = {\r\n    x: 20,\r\n    y: 20,\r\n  };\r\n  return (\r\n    <AssetImage componentScope={'Dial'} assetName={'dial-fg-marker'} {...other}\r\n      x={x + offset.x} y={y + offset.y} offsetX={offset.x} offsetY={offset.y} />\r\n  );\r\n};\r\nDialMarkerImage.imgWidthPx = 39;\r\nDialMarkerImage.imgHeightPx = 39;\r\nDialMarkerImage.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n};\r\n\r\nexport const DialStandbyOverlay = (props) => {\r\n  const { x, y } = props;\r\n  return (\r\n    <Ellipse\r\n      x={x + 56 - BackgroundImage.imgWidthPx / 2.0}\r\n      y={y + 104 - BackgroundImage.imgHeightPx}\r\n      width={DialMarkerImage.imgWidthPx}\r\n      height={DialMarkerImage.imgHeightPx}\r\n      fill={rgbaToHexCode(45, 45, 45, 190)}\r\n      onClick={props.onClick}\r\n    />\r\n  );\r\n};\r\nDialStandbyOverlay.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  onClick: PropTypes.func,\r\n};\r\nDialStandbyOverlay.defaultProps = {\r\n  x: 0,\r\n  y: 0,\r\n};","// @ts-check\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Text, Group } from 'react-konva';\r\nimport { rgbaToHexCode } from '../../../../common';\r\n\r\n/**\r\n * @param {{\r\n *  x: number;\r\n *  y: number;\r\n *  width: number;\r\n *  text: string;\r\n *  fillColour: { r: number, g: number, b: number, a?: number };\r\n *  centered: boolean;\r\n *  uppercase: boolean;\r\n *  children: React.ReactNode;\r\n * }} props\r\n */\r\nexport const HeaderText = (props) => {\r\n  const { r, g, b, a } = props.fillColour;\r\n  const color = rgbaToHexCode(r, g, b, a);\r\n  const text = (typeof props.children === 'string' && props.children) || props.text;\r\n  const transformedText = props.uppercase ? text.toUpperCase() : text;\r\n  return (\r\n    <Group\r\n      x={props.x}\r\n      y={props.y} >\r\n      {/* <Rect width={props.width} height={20} fill=\"red\" /> */}\r\n      <Text\r\n        text={transformedText}\r\n        fontFamily={'Roboto Condensed, Roboto, Arial'}\r\n        fontSize={13}\r\n        fontStyle={'bold'}\r\n        align={props.centered ? 'center' : undefined}\r\n        fill={color}\r\n        width={props.width}\r\n      />\r\n    </Group>\r\n  );\r\n};\r\n\r\nHeaderText.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  width: PropTypes.number,\r\n  text: PropTypes.string,\r\n  centered: PropTypes.bool,\r\n  uppercase: PropTypes.bool,\r\n  children: PropTypes.node,\r\n  fillColour: PropTypes.shape({\r\n    r: PropTypes.number,\r\n    g: PropTypes.number,\r\n    b: PropTypes.number,\r\n    a: PropTypes.oneOfType([PropTypes.number, PropTypes.any]),\r\n  })\r\n};\r\n\r\nHeaderText.defaultProps = {\r\n  text: 'HeaderLabel',\r\n  width: undefined,\r\n  centered: false,\r\n  uppercase: true,\r\n  fillColour: { r: 238, g: 129, b: 12 },\r\n};","/* eslint-disable react/prop-types */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { HeaderText } from './../HeaderText';\r\nimport { BackgroundImage, RoundDialImage, DialStandbyOverlay } from './Dial.assets';\r\n\r\nexport const DialBackground = ({ w, h, hideBackground, text, isInactive, noInactive, setInactive }) => {\r\n  const bg_y = h - BackgroundImage.imgHeightPx;\r\n  return [\r\n    hideBackground ? null : <BackgroundImage x={0} y={bg_y} key={'bg_1'} />,\r\n    <RoundDialImage x={0} y={bg_y} key={'bg_2'} />,\r\n    <HeaderText\r\n      x={0}\r\n      y={2}\r\n      centered={true}\r\n      fillColour={{ r: 255, g: 255, b: 255, a: 255 }}\r\n      width={w}\r\n      height={h - 50}\r\n      key={'bg_3'}\r\n    >{text}</HeaderText>,\r\n    isInactive && !noInactive\r\n      ? <DialStandbyOverlay y={bg_y} onClick={() => setInactive(false)} key={'bg_4'} />\r\n      : null\r\n  ];\r\n};\r\nDialBackground.propTypes = {\r\n  w: PropTypes.number,\r\n  h: PropTypes.number,\r\n  hideBackground: PropTypes.bool,\r\n  text: PropTypes.string,\r\n  isInactive: PropTypes.bool,\r\n  noInactive: PropTypes.bool,\r\n  setInactive: PropTypes.func\r\n};","/* eslint-disable react/prop-types */\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Group, Rect } from 'react-konva';\r\nimport { clampNumber } from '../../../../../common';\r\nimport { DialMarkerImage, BackgroundImage } from './Dial.assets';\r\nimport { DialBackground } from './DialBackground';\r\n\r\nexport const Dial = ({ text: propText, children, w, h, value: propValue, valueChanged, onValidateValue, x, y, hideBackground, noInactive }) => {\r\n  const [value, setValue] = useState(propValue);\r\n  const [rectY, setRectY] = useState(0);\r\n  const [isInactive, setInactive] = useState(!noInactive);\r\n\r\n  const text = children || propText;\r\n\r\n  useEffect(() => {\r\n    setValue(propValue);\r\n  }, [propValue]);\r\n\r\n  const incrementStateValue = (dy) => {\r\n    setValue((oldValue) => {\r\n      const nextValue = Math.round(oldValue * 1000 + dy * 10) * 0.001;\r\n      valueChanged\r\n        && oldValue !== nextValue\r\n        && nextValue >= 0\r\n        && nextValue <= 1\r\n        && valueChanged(clampNumber(nextValue));\r\n      return clampNumber(nextValue);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @param {{evt: WheelEvent}} e\r\n   */\r\n  const handleScroll = ({ evt }) => {\r\n    evt.stopPropagation(); evt.stopImmediatePropagation();\r\n    const nextY = -evt.deltaY;\r\n\r\n    incrementStateValue(nextY * 0.5);\r\n  };\r\n\r\n  /**\r\n   * @param {import('konva/types/Node').KonvaEventObject<DragEvent>} evt \r\n   */\r\n  const handleDragRectMove = (evt) => {\r\n    // @ts-check\r\n    const nextRectY = evt.target.y();\r\n    const dy = rectY === null ? 0 : rectY - nextRectY;\r\n    setRectY(nextRectY);\r\n\r\n    incrementStateValue(dy);\r\n  };\r\n\r\n  const handleDragRectStart = () => {\r\n    // @ts-check\r\n    setRectY(null);\r\n  };\r\n\r\n  /**\r\n   * @param {import('konva/types/Node').KonvaEventObject<DragEvent>} evt \r\n   */\r\n  const handleDragRectEnd = (evt) => {\r\n    // @ts-check\r\n    evt.target.x(0);\r\n    evt.target.y(0);\r\n\r\n    typeof onValidateValue === 'function'\r\n      && onValidateValue(value);\r\n  };\r\n\r\n  const img_w = BackgroundImage.imgWidthPx;\r\n  const bg_y = h - BackgroundImage.imgHeightPx;\r\n  const rotation = (clampNumber(value) || 0) * 274;\r\n  // console.warn({ value, rotation })\r\n  return (\r\n    <Group x={x} y={y}\r\n      onWheel={handleScroll}\r\n    >\r\n      <DialBackground w={w} h={h} hideBackground={hideBackground} text={text} isInactive={isInactive}\r\n        noInactive={noInactive} setInactive={setInactive} />\r\n      <DialMarkerImage x={37 - img_w / 2} y={bg_y + 20} rotation={rotation} />\r\n      <Rect\r\n        // fill=\"rgba(0.1, 0.1, 0.1, 0.5)\"\r\n        width={w} height={h} draggable={true}\r\n        onDragStart={handleDragRectStart}\r\n        onDragMove={handleDragRectMove}\r\n        onDragEnd={handleDragRectEnd} />\r\n    </Group>\r\n  );\r\n};\r\n\r\nDial.propTypes = {\r\n  value: PropTypes.number,\r\n  valueChanged: PropTypes.func,\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  w: PropTypes.number,\r\n  h: PropTypes.number,\r\n  text: PropTypes.string,\r\n  hideBackground: PropTypes.bool,\r\n  noInactive: PropTypes.bool,\r\n};\r\nDial.defaultProps = {\r\n  text: 'Param',\r\n  value: 0,\r\n  inactive: true,\r\n  mouseDown: false,\r\n  w: 57,\r\n  h: 68,\r\n};\r\n\r\nexport default Dial;","import { useEffect, useState } from 'react';\r\nimport store, { observerSubscribe } from '../../../../../store';\r\n\r\nexport const ConnectHook = (hook, initalValue = 0.5, scale = false, log = false) => (componentCreator) => {\r\n\r\n  const [state, setState] = useState(initalValue);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = observerSubscribe((storage) => {\r\n      const { param } = mapStateToProps(storage);\r\n      setState(param);\r\n    }, hook[0]);\r\n    return unsubscribe;\r\n  }, [initalValue]);\r\n\r\n  function mapStateToProps(state) {\r\n    return { param: state && hook[0](state) };\r\n  }\r\n  function mapDispatchToProps(value) {\r\n    return store.dispatch(hook[1](value));\r\n  }\r\n  if (scale) {\r\n    const [min, max] = ((hook && hook[2]) || [0, 1]).map(limit => log ? Math.log(limit) : limit);\r\n\r\n    const scaleFromUnit = value => (max - min) * value + min;\r\n    const scaleToUnit = value => (value - min) / (max - min);\r\n\r\n    const _state = log ? Math.log(state) : state;\r\n\r\n    const _value = (hook && (state || state !== 0) && scaleToUnit(_state)) || 0;\r\n    const _valueChanged = value => mapDispatchToProps(log ? Math.exp(scaleFromUnit(value)) : scaleFromUnit(value));\r\n    return componentCreator({\r\n      valueChanged: _valueChanged,\r\n      value: _value\r\n    });\r\n  }\r\n  return componentCreator({\r\n    valueChanged: mapDispatchToProps,\r\n    value: state\r\n  });\r\n};\r\n","/* eslint-disable react/prop-types */\r\nimport React, { } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ConnectHook } from '../../common-core';\r\nimport Dial from './Dial';\r\n\r\nexport const ConnectDial = ({ hook, ...props }) => ConnectHook(hook)(({ value, valueChanged }) => {\r\n  const [min, max] = (hook && hook[2]) || [0, 1];\r\n\r\n  const scaleFromUnit = value => (max - min) * value + min;\r\n  const scaleToUnit = value => (value - min) / (max - min);\r\n\r\n  const _value = (hook && (value || value !== 0) && scaleToUnit(value)) || 0;\r\n  const _valueChanged = value => valueChanged(scaleFromUnit(value));\r\n\r\n  return <Dial {...props} value={_value} valueChanged={_valueChanged} />;\r\n});\r\nConnectDial.propTypes = {\r\n  hook: PropTypes.array,\r\n};","/* eslint-disable react/prop-types */\r\nimport React, { } from 'react';\r\nimport { ConnectHook } from '../../common-core';\r\nimport Dial from './Dial';\r\n\r\nexport const ConnectLogDial = ({ hook, ...props }) => ConnectHook(hook)(({ value, valueChanged }) => {\r\n  const range = (hook && hook[2]) || [0, 1];\r\n  const [min, max] = range.map(bound => Math.log(bound));\r\n\r\n  const scaleFromUnit = value => (max - min) * value + min;\r\n  const scaleToUnit = value => (value - min) / (max - min);\r\n\r\n  const logValue = Math.log(value);\r\n  const _value = (hook && (value || value !== 0) && scaleToUnit(logValue)) || 0;\r\n  const _valueChanged = value => valueChanged(Math.exp(scaleFromUnit(value)));\r\n\r\n  return <Dial {...props} value={_value} valueChanged={_valueChanged} />;\r\n});","/* eslint-disable react/prop-types */\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ConnectHook } from '../../common-core';\r\nimport Dial from './Dial';\r\n//@ts-check\r\n\r\nexport const ConnectSnappyDial = ({ hook, segmentCount, ...props }) => ConnectHook(hook)(({ value, valueChanged }) => {\r\n  const [min, max] = (hook && hook[2]) || [0, 1];\r\n\r\n  const scaleFromUnit = value => (max - min) * value + min;\r\n  const scaleToUnit = value => (value - min) / (max - min);\r\n\r\n  const _value = (hook && (value || value !== 0) && scaleToUnit(value)) || 0;\r\n  const _valueChanged = value => valueChanged(scaleFromUnit(value));\r\n  const _validateValue = nextValue => _valueChanged(Math.round(segmentCount * nextValue) / segmentCount);\r\n\r\n  return <Dial {...props} value={_value} valueChanged={_valueChanged} onValidateValue={_validateValue} />;\r\n});\r\nConnectSnappyDial.propTypes = {\r\n  hook: PropTypes.array,\r\n  segmentCount: PropTypes.number,\r\n};\r\n","/* eslint-disable react/prop-types */\r\nimport React, { } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Dial from './Dial';\r\n//@ts-check\r\n\r\nexport const ReduxDial = ({ store, action, ...others }) => {\r\n  const handleValueChanged = (value) => store.dispatch(action(value));\r\n  return <Dial {...others} valueChanged={handleValueChanged} />;\r\n};\r\nReduxDial.propTypes = {\r\n  store: PropTypes.object,\r\n  action: PropTypes.func,\r\n};","//@ts-check\r\nimport React from 'react';\r\nimport { AssetImage } from '../../features';\r\n\r\nexport const SelectorBackground = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'base-sel-bar-bg'} {...props} />;\r\n};\r\nSelectorBackground.imgWidthPx = 279;\r\nSelectorBackground.imgHeightPx = 27;\r\n\r\nexport const SelectorButton = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'btn-sel-bar-bg'} {...props} />;\r\n};\r\nSelectorButton.imgWidthPx = 26;\r\n\r\nexport const SelectorUpArrow = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'arrow-up-sel'} {...props} />;\r\n};\r\n\r\nexport const SelectorDownArrow = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'arrow-down-sel'} {...props} />;\r\n};\r\nSelectorDownArrow.imgWidthPx = 27;\r\n\r\nexport const DropDownBackground = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'base-drop-down-bg'} {...props} />;\r\n};\r\nDropDownBackground.imgWidthPx = 278;\r\nDropDownBackground.imgHeightPx = 165;\r\n\r\nexport const DropDownScrollBackground = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'scroll-drop-down-bg'} {...props} />;\r\n};\r\nDropDownScrollBackground.imgWidthPx = 13;\r\n\r\nexport const DropDownScrollbarTop = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'scroll-bar-fg-top'} {...props} />;\r\n};\r\nDropDownScrollbarTop.imgHeightPx = 12;\r\n\r\nexport const DropDownScrollbarMid = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'scroll-bar-fg-mid'} {...props} />;\r\n};\r\nDropDownScrollbarMid.imgHeightPx = 15;\r\n\r\nexport const DropDownScrollbarBtm = (props) => {\r\n  return <AssetImage componentScope={'PresetSelector'} assetName={'scroll-bar-fg-btm'} {...props} />;\r\n};\r\nDropDownScrollbarBtm.imgHeightPx = 15;\r\n\r\nexport const PresetEventType = {\r\n  UP_BUTTON_PRESSED: 'UP_BUTTON_PRESSED',\r\n  DOWN_BUTTON_PRESSED: 'DOWN_BUTTON_PRESSED',\r\n  RELOAD_PRESET: 'RELOAD_PRESET'\r\n};","//@ts-check\r\nimport React, {  } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Group } from 'react-konva';\r\nimport { HeaderText } from '../HeaderText';\r\nimport { SelectorBackground, SelectorDownArrow, SelectorButton, SelectorUpArrow } from './PresetSelector.assets';\r\n\r\nconst [bg_w] = [SelectorBackground.imgWidthPx];\r\nconst sud_w = SelectorDownArrow.imgWidthPx;\r\nconst btn_w = SelectorButton.imgWidthPx;\r\n\r\nconst txtColour = { r: 255, g: 255, b: 255, a: 150 };\r\n\r\nconst PresetEventType = {\r\n  UP_BUTTON_PRESSED: 'UP_BUTTON_PRESSED',\r\n  DOWN_BUTTON_PRESSED: 'DOWN_BUTTON_PRESSED',\r\n  RELOAD_PRESET: 'RELOAD_PRESET'\r\n};\r\n\r\nexport const PresetSelectorBar = ({ onToggleDropDown, presetText, handleEvent }) => {\r\n  const onUpButtonClick = () => handleEvent(PresetEventType.UP_BUTTON_PRESSED);\r\n  const onDownButtonClick = () => handleEvent(PresetEventType.DOWN_BUTTON_PRESSED);\r\n  return (\r\n    <Group>\r\n      <SelectorBackground onMouseDown={onToggleDropDown} />\r\n      <HeaderText x={10} y={9} fillColour={txtColour}>{presetText}</HeaderText>\r\n      <SelectorUpArrow x={bg_w - sud_w * 2} onClick={onUpButtonClick} />\r\n      <SelectorDownArrow x={bg_w - sud_w * 1} onClick={onDownButtonClick} />\r\n      <SelectorButton x={bg_w - 1} />\r\n      <SelectorButton x={bg_w - 1 + btn_w} />\r\n    </Group>);\r\n};\r\nPresetSelectorBar.propTypes = {\r\n  onToggleDropDown: PropTypes.func,\r\n  handleEvent: PropTypes.func,\r\n  presetText: PropTypes.string,\r\n};","//@ts-check\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Group } from 'react-konva';\r\nimport { clampNumber } from '../../../../../common';\r\nimport { SelectorBackground, DropDownScrollBackground, DropDownScrollbarTop, DropDownScrollbarBtm } from './PresetSelector.assets';\r\n\r\nconst [bg_w, bg_h] = [SelectorBackground.imgWidthPx, SelectorBackground.imgHeightPx];\r\nconst scrbg_w = DropDownScrollBackground.imgWidthPx;\r\n\r\nexport const DropDownScrollbar = ({ scrolledRows, scrolledRowsChanged, itemsCount, slicedCount }) => {\r\n  const scrollOffsetX = bg_w - 6 - scrbg_w;\r\n  const scrollOffsetY = bg_h + 5;\r\n  const dropScrollTopH = DropDownScrollbarTop.imgHeightPx;\r\n\r\n  const scrollAmtMax = 140;\r\n  const scrollAmtCalc = _scrolledRows => Math.floor(scrollAmtMax * _scrolledRows / (itemsCount - slicedCount));\r\n  const scrollRowsCalc = y => Math.round(clampNumber(y, scrollAmtMax, 0) * (itemsCount - slicedCount) / scrollAmtMax);\r\n  const [scrollAmt, setScrollAmt] = useState(scrollAmtCalc(scrolledRows));\r\n\r\n  useEffect(() => {\r\n    setScrollAmt(scrollAmtCalc(scrolledRows));\r\n  }, [scrolledRows]);\r\n\r\n  /**\r\n   * @param {import('konva/types/Node').KonvaEventObject<DragEvent>} evt\r\n   */\r\n  const onDragMove = evt => {\r\n    const targetY = evt.target.y();\r\n\r\n    evt.target.x(0);\r\n    evt.target.y(clampNumber(targetY, scrollAmtMax, 0));\r\n    \r\n    const calcScrollRows = scrollRowsCalc(targetY);\r\n    if (calcScrollRows !== scrolledRows) {\r\n      scrolledRowsChanged(calcScrollRows);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {import('konva/types/Node').KonvaEventObject<DragEvent>} evt\r\n   */\r\n  const onDragEnd = evt => {\r\n    const calcScrollRows = scrollRowsCalc(evt.target.y());\r\n    setScrollAmt(scrollAmtCalc(calcScrollRows));\r\n  };\r\n\r\n  return (\r\n    <Group y={scrollAmt} draggable={true} onDragMove={onDragMove} onDragEnd={onDragEnd}>\r\n      <DropDownScrollbarTop x={scrollOffsetX} y={scrollOffsetY} />\r\n      {/* <DropDownScrollbarMid x={scrollOffsetX} y={scrollOffsetY + scrollAmt + dropScrollTopH} /> */}\r\n      <DropDownScrollbarBtm x={scrollOffsetX} y={scrollOffsetY + dropScrollTopH} />\r\n    </Group>\r\n  );\r\n};\r\nDropDownScrollbar.propTypes = {\r\n  scrolledRows: PropTypes.number,\r\n  scrolledRowsChanged: PropTypes.func,\r\n  itemsCount: PropTypes.number,\r\n  slicedCount: PropTypes.number,\r\n};","//@ts-check\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Group, Line, Rect } from 'react-konva';\r\nimport { HeaderText } from '../HeaderText';\r\nimport { SelectorBackground, DropDownScrollBackground, DropDownBackground, PresetEventType } from './PresetSelector.assets';\r\nimport { DropDownScrollbar } from './DropDownScrollbar';\r\n\r\nconst [bg_w, bg_h] = [SelectorBackground.imgWidthPx, SelectorBackground.imgHeightPx];\r\nconst scrbg_w = DropDownScrollBackground.imgWidthPx;\r\n\r\nconst txtColour = { r: 255, g: 255, b: 255, a: 150 };\r\nconst txtSelectedColour = { r: 255, g: 255, b: 255, a: 255 };\r\n\r\nconst DropdownMaxRows = 8;\r\n\r\nexport const PresetSelectorDropdown = ({ visible, onChangePreset, handleEvent, presetItems, selectedIndex: selIdx }) => {\r\n  const [scrolledRows, setScrolledRows] = useState(0);\r\n  const [selectedIndex, setIndex] = useState(selIdx);\r\n\r\n  const scrollIdx = {\r\n    min: scrolledRows,\r\n    max: scrolledRows + DropdownMaxRows\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selIdx !== selectedIndex) {\r\n      if (selIdx < scrollIdx.min && selIdx >= 0) {\r\n        setScrolledRows(selIdx);\r\n      } else if (selIdx >= scrollIdx.max) {\r\n        setScrolledRows(Math.min(selIdx - DropdownMaxRows + 1, presetItems.length - DropdownMaxRows));\r\n      }\r\n    }\r\n    setIndex(selIdx);\r\n  }, [selIdx]);\r\n\r\n  const onScroll = nextScrolledRows => {\r\n    if (nextScrolledRows !== scrolledRows) {\r\n      setScrolledRows(nextScrolledRows);\r\n    }\r\n  };\r\n\r\n  const itemTxtColour = (idx) => idx === selectedIndex ? txtSelectedColour : txtColour;\r\n\r\n  const listItemWidth = 242;\r\n  const listItemHeight = 20.4;\r\n  const listItems = presetItems\r\n    .slice(scrollIdx.min, scrollIdx.max)\r\n    .map((item, idx, { length }) => {\r\n      const handlePresetClick = () => {\r\n        onChangePreset && onChangePreset({\r\n          idx: scrolledRows + idx,\r\n          presetName: presetItems[scrolledRows + idx]\r\n        });\r\n      };\r\n\r\n      return [\r\n        <HeaderText\r\n          x={13}\r\n          y={38 + listItemHeight * idx}\r\n          fillColour={itemTxtColour(scrolledRows + idx)}\r\n          uppercase={false}\r\n          key={item + idx + '_0'}\r\n        >\r\n          {item}\r\n        </HeaderText>,\r\n        (idx < length - 1) && (<Line\r\n          points={[\r\n            13,\r\n            6.4 + bg_h + listItemHeight * (idx + 1),\r\n            listItemWidth + 13,\r\n            6.4 + bg_h + listItemHeight * (idx + 1)\r\n          ]}\r\n          stroke={'#19191980'}\r\n          strokeWidth={1}\r\n          key={item + idx + '_l'} />),\r\n        <Rect\r\n          x={13}\r\n          y={38 + listItemHeight * idx}\r\n          width={listItemWidth}\r\n          height={listItemHeight}\r\n          fillColour={{ r: 0, g: 0, b: 0, a: 0 }}\r\n          onClick={handlePresetClick}\r\n          key={item + idx + '_2'}\r\n        />\r\n      ];\r\n    });\r\n\r\n  const scrollOffsetX = bg_w - 6 - scrbg_w;\r\n  const scrollOffsetY = bg_h + 5;\r\n\r\n  return visible && (\r\n    <Group>\r\n      <DropDownBackground x={-1} y={bg_h - 1} />\r\n      {listItems}\r\n      <DropDownScrollBackground x={scrollOffsetX} y={scrollOffsetY} />\r\n      <DropDownScrollbar scrolledRows={scrolledRows} scrolledRowsChanged={onScroll} itemsCount={presetItems.length} slicedCount={listItems.length} />\r\n    </Group>);\r\n};\r\n\r\nPresetSelectorDropdown.propTypes = {\r\n  visible: PropTypes.bool,\r\n  onChangePreset: PropTypes.func,\r\n  handleEvent: PropTypes.func,\r\n  selectedIndex: PropTypes.number,\r\n};\r\nPresetSelectorDropdown.defaultProps = {\r\n  onChangePreset: null,\r\n  selectedIndex: 0,\r\n};","//@ts-check\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Group } from 'react-konva';\r\nimport { postPresetLine } from '../../../../../workerActions';\r\nimport { PresetEventType } from './PresetSelector.assets';\r\nimport { PresetSelectorBar } from './PresetSelectorBar';\r\nimport { PresetSelectorDropdown } from './PresetSelectorDropdown';\r\n\r\n\r\nconst tempPresetsPromise = fetch('res/csharp/factorypresets.sdp');\r\n\r\n/**\r\n * @param {string} presets\r\n */\r\nconst parsePresetLines = (presets) => {\r\n  return (presets && presets.split('\\n')) || [];\r\n};\r\n\r\n/**\r\n * @param {string[]} presetArray\r\n * @param {number} index\r\n */\r\nconst parsePresetName = (presetArray, index) => {\r\n  const presetLine = presetArray && presetArray[index];\r\n  return parsePresetNameFromLine(presetLine);\r\n};\r\n/**\r\n * @param {string} presetLine\r\n */\r\nconst parsePresetNameFromLine = (presetLine) => {\r\n  const presetSections = presetLine && presetLine.split('|');\r\n  const metadata = (presetSections && presetSections.length > 1 && presetSections[0]) || null;\r\n  const metadataSections = metadata && metadata.split(':');\r\n  return metadataSections && metadataSections[1];\r\n};\r\n\r\nexport const PresetSelector = ({ x, y }) => {\r\n  const [isDropVisible, setDropVisible] = useState(false);\r\n  const toggleDropDown = () => setDropVisible(!isDropVisible);\r\n\r\n  const [presetArray, updatePresetArray] = useState([]);\r\n  const initialPresetIdx = 0;\r\n\r\n  const [selectedPreset, setPreset] = useState({ presetName: 'Initial', idx: 0 });\r\n  const handlePresetNameAndPush = async ({ presetName, idx }) =>\r\n    await new Promise(ok => setPreset(() => { ok(); return { presetName, idx }}));\r\n\r\n  useEffect(() => {\r\n    tempPresetsPromise\r\n      .then(res => res.text())\r\n      .then(text => {\r\n        const presetArray = parsePresetLines(text);\r\n        const initialPresetName = parsePresetName(presetArray, initialPresetIdx);\r\n        updatePresetArray(presetArray);\r\n        return handlePresetNameAndPush({ presetName: initialPresetName, idx: initialPresetIdx });\r\n      });\r\n  }, []);\r\n\r\n  const handleNewPresetSelection = async ({ presetName, idx }) => {\r\n    await handlePresetNameAndPush({presetName, idx});\r\n    await postPresetLine(presetArray[idx]);\r\n  };\r\n\r\n  const shiftPreset = (shiftAmount) => {\r\n    const presetCount = presetArray.length;\r\n    const idx = (selectedPreset.idx + shiftAmount + presetCount) % presetCount;\r\n    return { presetName: parsePresetName(presetArray, idx), idx };\r\n  };\r\n\r\n  /**\r\n   * @param {string} [presetEventType]\r\n   */\r\n  const handleEvent = async (presetEventType) => {\r\n    let newPreset = selectedPreset;\r\n    switch (presetEventType) {\r\n      case PresetEventType.UP_BUTTON_PRESSED:\r\n        newPreset = shiftPreset(-1);\r\n        setPreset(newPreset);\r\n        await postPresetLine(presetArray[newPreset.idx]);\r\n        break;\r\n      case PresetEventType.DOWN_BUTTON_PRESSED:\r\n        newPreset = shiftPreset(+1);\r\n        setPreset(newPreset);\r\n        await postPresetLine(presetArray[newPreset.idx]);\r\n        break;\r\n      case PresetEventType.RELOAD_PRESET:\r\n        // newPreset = shiftPreset(0);\r\n        // setPreset(newPreset);\r\n        await postPresetLine(presetArray[newPreset.idx]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Group x={x} y={y}>\r\n      <PresetSelectorBar\r\n        onToggleDropDown={toggleDropDown}\r\n        presetText={selectedPreset.presetName}\r\n        handleEvent={handleEvent}\r\n      />\r\n      <PresetSelectorDropdown\r\n        visible={isDropVisible}\r\n        onChangePreset={handleNewPresetSelection}\r\n        selectedIndex={selectedPreset.idx}\r\n        handleEvent={handleEvent}\r\n        presetItems={presetArray.map(line => parsePresetNameFromLine(line))}\r\n      />\r\n    </Group>\r\n  );\r\n};\r\nPresetSelector.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n};\r\n\r\n","//@ts-check\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { AssetImage } from '../features';\r\nimport { HeaderText } from './HeaderText';\r\nimport { Group } from 'react-konva';\r\nimport { ConnectHook } from '../common-core';\r\n\r\nconst ToggleImage = (props) => {\r\n  const { on, ...other } = props;\r\n  if (on) {\r\n    return <AssetImage componentScope={'ToggleIcon'} assetName={'toggle-on'} {...other} />;\r\n  } else {\r\n    return <AssetImage componentScope={'ToggleIcon'} assetName={'toggle-off'} {...other} />;\r\n  }\r\n};\r\n\r\nToggleImage.imgWidthPx = 18;\r\nToggleImage.imgHeightPx = 20;\r\n\r\nexport class ToggleIcon extends Component {\r\n  state = {\r\n    checked: false,\r\n    img_x: 0,\r\n    img_y: 0,\r\n    txt_x: 0,\r\n    txt_y: 0,\r\n    text: '',\r\n    layoutCompleted: false,\r\n  };\r\n\r\n  /**\r\n   * @param {{w: number, h: number, text?: string, checked: boolean, onClick: (checked: boolean) => void, children: React.ReactNode}} props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.handleLayout = this.handleLayout.bind(this);\r\n\r\n    this.w = this.props.w;\r\n    this.h = this.props.h;\r\n    this.state.checked = props.checked;\r\n    this.state.text = typeof (props.text) === 'string'\r\n      ? props.text\r\n      : (typeof props.children === 'string' && props.children) || this.state.text;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handleLayout({\r\n      w: ToggleImage.imgWidthPx,\r\n      h: ToggleImage.imgHeightPx,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { checked } = this.props;\r\n    if (typeof checked === 'undefined') {\r\n      return;\r\n    }\r\n    if (this.state.checked !== checked) {\r\n      this.handleClick();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {{w: number, h: number}} imgInfo\r\n   */\r\n  handleLayout(imgInfo) {\r\n    if (this.state.layoutCompleted) {\r\n      return;\r\n    }\r\n    this.setState(() => {\r\n      return ({\r\n        img_x: this.w / 2 - imgInfo.w / 2,\r\n        img_y: this.h - imgInfo.h,\r\n        txt_x: 0,\r\n        txt_y: this.h - 12 - imgInfo.h,\r\n        layoutCompleted: true,\r\n      });\r\n    });\r\n  }\r\n\r\n  handleClick = () => {\r\n    if (this.props.enabled) {\r\n      this.props.onClick && this.props.onClick(!this.state.checked);\r\n      this.setState((state) => {\r\n        return ({\r\n          checked: !state.checked\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { x, y, w } = this.props;\r\n    return (\r\n      <Group x={x} y={y}>\r\n        {/* <Rect width={this.w} height={this.h} fill=\"black\"/> */}\r\n        <ToggleImage\r\n          on={this.state.checked}\r\n          x={this.state.img_x}\r\n          y={this.state.img_y}\r\n          onClick={this.handleClick}\r\n        />\r\n        {this.state.text ? <HeaderText\r\n          x={this.state.txt_x}\r\n          y={this.state.txt_y}\r\n          width={w}\r\n          centered={true}\r\n          fillColour={{ r: 255, g: 255, b: 255, a: 150 }}\r\n        >{this.state.text}</HeaderText> : null}\r\n      </Group>\r\n    );\r\n  }\r\n}\r\n\r\nToggleIcon.propTypes = {\r\n  w: PropTypes.number,\r\n  h: PropTypes.number,\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  text: PropTypes.string,\r\n  enabled: PropTypes.bool,\r\n  checked: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n  children: PropTypes.node\r\n};\r\n\r\nToggleIcon.defaultProps = {\r\n  w: 44,\r\n  h: 53,\r\n  x: 0,\r\n  y: 0,\r\n  enabled: true,\r\n  checked: undefined,\r\n};\r\n\r\nexport const ConnectToggle = ({ hook, ...props }) => ConnectHook(hook)(({ value, valueChanged }) => {\r\n  const _value = (hook && (value || value !== 0) && value > 0.5) || false;\r\n  const _valueChanged = checked => valueChanged(+checked);\r\n\r\n  return <ToggleIcon {...props} checked={_value} onClick={_valueChanged} />;\r\n});\r\nConnectToggle.propTypes = {\r\n  hook: PropTypes.array,\r\n};","//@ts-check\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { AssetImage } from '../features';\r\nimport { Group } from 'react-konva';\r\nimport { clampNumber } from '../../../../common';\r\nimport { ConnectHook } from '../common-core';\r\n\r\nconst TouchPadBackground = (props) => {\r\n  return <AssetImage componentScope={'TouchPad'} assetName={'touchpad-bg'} {...props} />;\r\n};\r\nTouchPadBackground.imgWidthPx = 184;\r\nTouchPadBackground.imgHeightPx = 147;\r\n\r\nexport const TouchPad = ({ x, y, enabled, hValue, vValue, sensitivity, tapToToggle, valueChanged, enabledChanged }) => {\r\n  const [mouseDown, setIsMouseDown] = useState(false);\r\n  const [prevOffset, setPrevOffset] = useState({ x: 0, y: 0 });\r\n  const [value, setValue] = useState({ hValue, vValue });\r\n  const [_toggleEnabled, setToggle] = useState(enabled);\r\n  const toggleEnabled = tapToToggle ? _toggleEnabled : enabled;\r\n\r\n  useEffect(() => setToggle(enabled), [enabled]);\r\n  /**\r\n   * @param {{evt: MouseEvent}} e\r\n   */\r\n  const handleDragStart = ({ evt }) => {\r\n    if (evt.which === 1) {\r\n      setIsMouseDown(true);\r\n    }\r\n    const { offsetX, offsetY } = evt;\r\n    setPrevOffset({ x: offsetX, y: offsetY });\r\n    const nextToggleState = !toggleEnabled;\r\n    if (_toggleEnabled !== nextToggleState && typeof enabledChanged === 'function') {\r\n      enabledChanged(nextToggleState);\r\n    }\r\n    setToggle(nextToggleState);\r\n  };\r\n\r\n  /**\r\n   * @param {{evt: MouseEvent}} e\r\n   */\r\n  const handleDragMove = ({ evt }) => {\r\n    if (!toggleEnabled) {\r\n      if (evt.which !== 1) {\r\n        setIsMouseDown(false);\r\n        return;\r\n      }\r\n      if (!mouseDown) {\r\n        return;\r\n      }\r\n    }\r\n    const { offsetX, offsetY } = evt;\r\n    const dx = offsetX - prevOffset.x;\r\n    const dy = offsetY - prevOffset.y;\r\n\r\n    const nextValue = {\r\n      hValue: clampNumber(sensitivity * (dx / TouchPadBackground.imgWidthPx) + value.hValue),\r\n      vValue: clampNumber(sensitivity * (dy / TouchPadBackground.imgHeightPx) + value.vValue),\r\n    };\r\n    const hasValueChanged = (nextValue.hValue !== value.hValue || nextValue.vValue !== value.vValue);\r\n    setValue(nextValue);\r\n\r\n    typeof valueChanged === 'function'\r\n      && hasValueChanged\r\n      && valueChanged(nextValue);\r\n\r\n    setPrevOffset({ x: offsetX, y: offsetY });\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    if (!mouseDown) {\r\n      return;\r\n    }\r\n  };\r\n  return (\r\n    <Group x={x} y={y}\r\n      onMouseDown={handleDragStart}\r\n      onMouseMove={handleDragMove}\r\n      onMouseUp={handleDragEnd}\r\n    >\r\n      <TouchPadBackground />\r\n    </Group>\r\n  );\r\n};\r\n\r\nTouchPad.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  enabled: PropTypes.bool,\r\n  tapToToggle: PropTypes.bool,\r\n  hValue: PropTypes.number,\r\n  vValue: PropTypes.number,\r\n  sensitivity: PropTypes.number,\r\n  valueChanged: PropTypes.func,\r\n  enabledChanged: PropTypes.func,\r\n};\r\n\r\nTouchPad.defaultProps = {\r\n  x: 0,\r\n  y: 0,\r\n  enabled: true,\r\n  tapToToggle: false,\r\n  hValue: 0,\r\n  vValue: 0,\r\n  sensitivity: 0.5,\r\n};\r\n\r\nexport const ConnectTouchPad = ({ hHook, vHook, hLogScale, vLogScale, ...props }) => {\r\n  const splitHandle = ({ hValueChanged, vValueChanged }) =>\r\n    ({ hValue, vValue }) => { hValueChanged(hValue); vValueChanged(vValue); };\r\n\r\n  const XYHook = ConnectHook(hHook, 0, true, hLogScale)(\r\n    ({ value: hValue, valueChanged: hValueChanged }) =>\r\n      ConnectHook(vHook, 0, true, vLogScale)(\r\n        ({ value: vValue, valueChanged: vValueChanged }) =>\r\n          <TouchPad {...props}\r\n            hValue={hValue}\r\n            vValue={vValue}\r\n            valueChanged={splitHandle({ hValueChanged, vValueChanged })}\r\n          />\r\n      )\r\n  );\r\n\r\n  return XYHook;\r\n};\r\n\r\nConnectTouchPad.propTypes = {\r\n  hHook: PropTypes.array,\r\n  vHook: PropTypes.array,\r\n  hLogScale: PropTypes.bool,\r\n  vLogScale: PropTypes.bool,\r\n};\r\n\r\nexport const ToggleConnectTouchPad = ({ hHook, vHook, hLogScale, vLogScale, toggleHook, ...props }) =>\r\n  ConnectHook(toggleHook)(({ value: enabled, valueChanged: enableChanged }) => {\r\n    const _enabled = (toggleHook && (enabled || enabled !== 0) && enabled > 0.5) || false;\r\n    const _enableChanged = checked => enableChanged(+checked);\r\n\r\n    return <ConnectTouchPad {...props}\r\n      hHook={hHook} vHook={vHook} hLogScale={hLogScale} vLogScale={vLogScale}\r\n      enabledChanged={_enableChanged} enabled={_enabled} />;\r\n  });\r\n","//@ts-check\r\nimport React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { AssetImage } from '../features';\r\nimport { Group, Line } from 'react-konva';\r\nimport { waveform$ } from '../../../../store';\r\nimport { clampNumber } from '../../../../common';\r\n\r\nconst WaveBoxBackground = (props) => {\r\n  return <AssetImage componentScope={'WavePreviewBox'} assetName={'previewbox-bg'} {...props} />;\r\n};\r\nWaveBoxBackground.imgWidthPx = 178;\r\nWaveBoxBackground.imgHeightPx = 51;\r\n\r\nexport const WavePreviewBox = ({ x, y, gain }) => {\r\n  return (\r\n    <Group x={x} y={y}>\r\n      <WaveBoxBackground />\r\n      <WavePreviewBoxLine gain={gain} />\r\n    </Group>\r\n  );\r\n};\r\n\r\nWavePreviewBox.propTypes = {\r\n  x: PropTypes.number,\r\n  y: PropTypes.number,\r\n  enabled: PropTypes.bool,\r\n  gain: PropTypes.number\r\n};\r\n\r\nWavePreviewBox.defaultProps = {\r\n  x: 0,\r\n  y: 0,\r\n  enabled: true,\r\n  gain: 5\r\n};\r\n\r\nfunction notNaN(number) {\r\n  return number || 0;\r\n}\r\n\r\nconst WavePreviewBoxLine = ({ gain }) => {\r\n  const emptyArray = nItems => new Array(nItems).fill(0);\r\n  const [points, setPoints] = useState(emptyArray(128 * 2));\r\n\r\n  useEffect(() => {\r\n    const subscription = waveform$.subscribe(samples => {\r\n      const pts = [];\r\n      const maxIdx = samples.length - 1;\r\n      const mid = WaveBoxBackground.imgHeightPx / 2;\r\n      samples.forEach((sample, idx) => {\r\n        const clipped = clampNumber(sample * gain, 1, -1);\r\n        pts[idx * 2] = notNaN((WaveBoxBackground.imgWidthPx - (2)) * idx / maxIdx + 1);\r\n        pts[idx * 2 + 1] = notNaN(mid * (-clipped + 1));\r\n      });\r\n      setPoints(pts);\r\n    });\r\n    return () => subscription.unsubscribe();\r\n  }, [gain]);\r\n  return (\r\n    <Line points={points} strokeWidth={1.5} stroke={'#ffa500'} />\r\n  );\r\n};\r\n\r\nWavePreviewBoxLine.propTypes = {\r\n  gain: PropTypes.number\r\n};\r\n","import * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setParamAttack  = setParamValueFactory(types.SET_PARAM_AMP_ATTACK);\r\nexport const setParamDecay   = setParamValueFactory(types.SET_PARAM_AMP_DECAY);\r\nexport const setParamSustain = setParamValueFactory(types.SET_PARAM_AMP_SUSTAIN);\r\nexport const setParamRelease = setParamValueFactory(types.SET_PARAM_AMP_RELEASE);\r\nexport const setParamRate    = setParamValueFactory(types.SET_PARAM_AMP_LFO_RATE);\r\nexport const setParamWidth   = setParamValueFactory(types.SET_PARAM_AMP_LFO_WIDTH);\r\n","//@ts-check\r\nimport React from 'react';\r\nimport { Group } from 'react-konva';\r\n\r\nimport { HeaderText, ConnectDial } from '../components';\r\nimport { ctOrangeWithOpacity } from '../../../common';\r\nimport { setParamAttack, setParamDecay, setParamSustain, setParamRelease, setParamRate, setParamWidth } from '../../../redux/actions/AmpEnvActions';\r\nimport { Param } from '../../../redux/types';\r\nimport { createStoreHook } from '../../../redux/actions/helper';\r\n\r\nconst AttackHook = createStoreHook(Param.Attack, setParamAttack, [1, 1500]);\r\nconst DecayHook = createStoreHook(Param.Decay, setParamDecay, [2, 1500]);\r\nconst SustainHook = createStoreHook(Param.Sustain, setParamSustain, [0, 1]);\r\nconst ReleaseHook = createStoreHook(Param.Release, setParamRelease, [1, 1500]);\r\nconst AmpLFORateHook = createStoreHook(Param.AmpLFOrate, setParamRate, [5, 1500]);\r\nconst AmpLFOWidthHook = createStoreHook(Param.AmpLFOwidth, setParamWidth, [0, 1]);\r\n\r\nconst AmpEnvPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={219} y={300} width={62} centered>AMPLIFIER</HeaderText>\r\n\r\n      <ConnectDial x={216} y={323} h={70} hook={AttackHook}>Attack</ConnectDial>\r\n      <ConnectDial x={299} y={323} h={70} hook={DecayHook}>Decay</ConnectDial>\r\n      <ConnectDial x={382} y={323} h={70} hook={SustainHook}>Sustain</ConnectDial>\r\n      <ConnectDial x={465} y={323} h={70} hook={ReleaseHook}>Release</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst AmpLfoPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={349} y={465} width={38} centered\r\n        fillColour={ctOrangeWithOpacity(120)}>LFO</HeaderText>\r\n\r\n      <ConnectDial x={289} y={405} h={68} hook={AmpLFORateHook}>Rate</ConnectDial>\r\n      <ConnectDial x={392} y={405} h={68} hook={AmpLFOWidthHook}>Width</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const AmpEnvGroupPanel = () => {\r\n  return (\r\n    <Group>\r\n      <AmpEnvPanel />\r\n      <AmpLfoPanel />\r\n    </Group>\r\n  );\r\n};\r\n","import * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setEnableFilterEG     = setParamValueFactory(types.SET_ENABLE_FILTER_EG);\r\nexport const setParamFilterAttack  = setParamValueFactory(types.SET_PARAM_FILTER_EG_ATTACK);\r\nexport const setParamFilterRelease = setParamValueFactory(types.SET_PARAM_FILTER_EG_RELEASE);\r\nexport const setParamFilterFloor   = setParamValueFactory(types.SET_PARAM_FILTER_EG_FLOOR);\r\nexport const setParamFilterCeiling = setParamValueFactory(types.SET_PARAM_FILTER_EG_CEILING);\r\n","import React from 'react';\r\nimport { Group } from 'react-konva';\r\nimport { HeaderText, ConnectDial, ConnectToggle } from '../components';\r\nimport { setParamFilterAttack, setParamFilterCeiling, setParamFilterFloor, setParamFilterRelease, setEnableFilterEG } from '../../../redux/actions/FilterEnvActions';\r\nimport { Param } from '../../../redux/types';\r\nimport { createStoreHook } from '../../../redux/actions/helper';\r\n\r\nconst EnableEnvHook = createStoreHook(Param.LPFenvelope, setEnableFilterEG, [null, null]);\r\nconst AttackHook = createStoreHook(Param.LPFattack, setParamFilterAttack, [5, 1500]);\r\nconst ReleaseHook = createStoreHook(Param.LPFrelease, setParamFilterRelease, [5, 1500]);\r\nconst EnvFloorHook = createStoreHook(Param.LPFfloor, setParamFilterFloor, [5, 21000]);\r\nconst EnvCeilingHook = createStoreHook(Param.LPFceiling, setParamFilterCeiling, [5, 21000]);\r\n\r\nconst EnvPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={460} y={97} width={62}>ENVELOPE</HeaderText>\r\n      <ConnectToggle x={619} y={90} w={28} h={24} hook={EnableEnvHook}/>\r\n\r\n      <ConnectDial x={471} y={123} h={70} hook={AttackHook}>Attack</ConnectDial>\r\n      <ConnectDial x={570} y={123} h={70} hook={ReleaseHook}>Release</ConnectDial>\r\n      <ConnectDial x={471} y={200} h={70} hook={EnvFloorHook}>Floor</ConnectDial>\r\n      <ConnectDial x={570} y={200} h={70} hook={EnvCeilingHook}>Ceiling</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const EnvGroupPanel = () => {\r\n  return (\r\n    <Group>\r\n      <EnvPanel />\r\n    </Group>\r\n  );\r\n};\r\n","import * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setParamFilterCutoff   = setParamValueFactory(types.SET_PARAM_FILTER_CUTOFF);\r\nexport const setParamHarmonic2Gain  = setParamValueFactory(types.SET_PARAM_2ND_HARM_GAIN);\r\nexport const setMetaParamAltEnabled = setParamValueFactory(types.SET_META_PARAM_ALT_ENABLED);\r\n\r\n","import React from 'react';\r\nimport { Group } from 'react-konva';\r\nimport { HeaderText, ToggleIcon, PanelDivider, ConnectLogDial, ToggleConnectTouchPad, ConnectToggle } from '../components';\r\nimport { setParamFilterCutoff, setParamHarmonic2Gain, setMetaParamAltEnabled } from '../../../redux/actions/FilterTouchActions';\r\nimport { createStoreHook, createMetaStoreHook } from '../../../redux/actions/helper';\r\nimport { Param, MetaParam } from '../../../redux/types';\r\n\r\nconst FilterCutoffHook = createStoreHook(Param.LPF, setParamFilterCutoff, [30, 21000]);\r\nconst FilterCutoffTouchHook = createStoreHook(Param.LPF, setParamFilterCutoff, [30, 21000]);\r\nconst Harmonic2GainTouchHook = createStoreHook(Param.Harmonic2Gain, setParamHarmonic2Gain, [0, 100]);\r\nconst AltEnabledTouchHook = createMetaStoreHook(MetaParam.altEnabled, setMetaParamAltEnabled, [0, 1]);\r\n\r\nconst FilterPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={572} y={300} width={39} centered>FILTER</HeaderText>\r\n\r\n      <ConnectLogDial x={584} y={327} h={68} hook={FilterCutoffHook}>Cutoff</ConnectLogDial>\r\n      <ToggleIcon x={584} y={421} w={57} h={34} enabled={false}>4-Pole</ToggleIcon>\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst HarmonicsCtrlPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={683} y={300} width={62} centered>TOUCHPAD</HeaderText>\r\n\r\n      <ConnectToggle x={844} y={294} w={28} h={24} hook={AltEnabledTouchHook} />\r\n      <ToggleConnectTouchPad\r\n        x={683}\r\n        y={323}\r\n        hHook={Harmonic2GainTouchHook}\r\n        vHook={FilterCutoffTouchHook}\r\n        vLogScale={true}\r\n        toggleHook={AltEnabledTouchHook}\r\n        sensitivity={0.5}\r\n        tapToToggle={true}\r\n      />\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const FilterTouchGroupPanel = () => {\r\n  return (\r\n    <Group>\r\n      <FilterPanel />\r\n      <PanelDivider x={670} y={315} />\r\n      <HarmonicsCtrlPanel />\r\n    </Group>\r\n  );\r\n};","import * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setParamFilterModRate  = setParamValueFactory(types.SET_PARAM_FILTER_LFO_RATE);\r\nexport const setParamFilterModeWidth = setParamValueFactory(types.SET_PARAM_FILTER_LFO_WIDTH);\r\n\r\nexport const setParamMasterLevel = setParamValueFactory(types.SET_PARAM_MASTER_LEVEL);\r\n","import React from 'react';\r\nimport { Group } from 'react-konva';\r\nimport { HeaderText, Dial, ToggleIcon, PanelDivider, ConnectDial, ConnectLogDial } from '../components';\r\nimport { ctOrangeWithOpacity } from '../../../common';\r\nimport { createStoreHook } from '../../../redux/actions/helper';\r\nimport { Param } from '../../../redux/types';\r\nimport { setParamFilterModeWidth, setParamFilterModRate, setParamMasterLevel } from '../../../redux/actions/MasterActions';\r\n\r\nconst FilterModRateHook = createStoreHook(Param.LPFmodrate, setParamFilterModRate, [0, 20]);\r\nconst FilterCutoffHook = createStoreHook(Param.LPFwidth, setParamFilterModeWidth, [10, 15000]);\r\n// const FilterCutoffHook = createStoreHook(Param.LPF, setParamFilterCutoff, [5, 21000]);\r\n\r\nconst LfoPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={670} y={97} width={39} centered>LFO</HeaderText>\r\n\r\n      <HeaderText x={728} y={153} width={67} centered\r\n        fillColour={ctOrangeWithOpacity(120)}>Send To:</HeaderText>\r\n      <ToggleIcon x={733} y={170} w={57} h={34}>LPF</ToggleIcon>\r\n      <ToggleIcon x={733} y={208} w={57} h={34}>HPF</ToggleIcon>\r\n\r\n      <ConnectDial x={673} y={123} h={68} hook={FilterModRateHook}>Rate</ConnectDial>\r\n      <ConnectDial x={673} y={200} h={68} hook={FilterCutoffHook}>Width</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst MasterLevelHook = createStoreHook(Param.Gain, setParamMasterLevel, [0, 1]);\r\n\r\nconst MasterPanel = () => {\r\n  // todo: continue master level dial\r\n  return (\r\n    <Group>\r\n      <HeaderText x={814} y={97} width={48} centered>MASTER</HeaderText>\r\n\r\n      <ConnectLogDial x={810} y={123} h={65} hook={MasterLevelHook}>Level</ConnectLogDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const MasterGroupPanel = () => {\r\n  return (\r\n    <Group>\r\n      <LfoPanel />\r\n      <PanelDivider x={791} y={110} />\r\n      <MasterPanel />\r\n    </Group>\r\n  );\r\n};","import * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setParamPitchRate  = setParamValueFactory(types.SET_PARAM_PITCH_LFO_RATE);\r\nexport const setParamPitchWidth = setParamValueFactory(types.SET_PARAM_PITCH_LFO_WIDTH);\r\n","import React from 'react';\r\nimport { Group } from 'react-konva';\r\n\r\nimport { HeaderText, ConnectDial } from '../components';\r\nimport { createStoreHook } from '../../../redux/actions/helper';\r\nimport { Param } from '../../../redux/types';\r\nimport { setParamPitchRate, setParamPitchWidth } from '../../../redux/actions/PitchActions';\r\n\r\nconst PitchRateModHook = createStoreHook(Param.Pitchmod, setParamPitchRate, [0, 20]);\r\nconst PitchWidthModHook = createStoreHook(Param.PitchmodWidth, setParamPitchWidth, [0, 0.2]);\r\n\r\nconst PitchPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={131} y={300} width={37} centered>PITCH</HeaderText>\r\n\r\n      <ConnectDial x={123} y={323} h={68} hook={PitchRateModHook}>Rate</ConnectDial>\r\n      <ConnectDial x={123} y={400} h={68} hook={PitchWidthModHook}>Width</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const PitchGroupPanel = () => {\r\n  return (\r\n    <Group>\r\n      <PitchPanel />\r\n    </Group>\r\n  );\r\n};","// @ts-check\r\nimport * as types from '../actionTypes';\r\nimport { setParamValueFactory } from './helper';\r\n\r\nexport const setParamOscPhase = setParamValueFactory(types.SET_PARAM_OSC_PHASE);\r\nexport const setParamOscWaveFunction = setParamValueFactory(types.SET_PARAM_OSC_WAVEFUNCTION);\r\nexport const setParamOscGain = setParamValueFactory(types.SET_PARAM_OSC_GAIN);\r\n\r\nexport const setParamDelayLength = setParamValueFactory(types.SET_PARAM_DELAY_LENGTH);\r\nexport const setParamDelayWetAmt = setParamValueFactory(types.SET_PARAM_DELAY_WET);\r\n\r\nexport const setParamReverbWetAmt = setParamValueFactory(types.SET_PARAM_REVERB_LENGTH);","import React, { useState } from 'react';\r\nimport { Group } from 'react-konva';\r\n\r\nimport { HeaderText, PanelDivider, WavePreviewBox, ReduxDial, ConnectDial, ToggleIcon, ConnectSnappyDial } from '../components';\r\nimport { setParamDelayLength, setParamDelayWetAmt, setParamOscPhase, setParamOscWaveFunction, setParamOscGain, setParamReverbWetAmt } from '../../../redux/actions/OscActions';\r\nimport store from '../../../store';\r\nimport { createStoreHook } from '../../../redux/actions/helper';\r\nimport { Param } from '../../../redux/types';\r\n\r\nconst OscPhaseHook = createStoreHook(Param.HarmonicPhase, setParamOscPhase, [0, 1]);\r\nconst OscWaveSelectorHook = createStoreHook(Param.WFunction, setParamOscWaveFunction, [0, 5]);\r\nconst OscGainHook = createStoreHook(Param.GeneralAtten, setParamOscGain, [-48, 6]);\r\n\r\nconst OscPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={131} y={97} width={38} centered>OSC 1</HeaderText>\r\n      <WavePreviewBox x={131} y={120} />\r\n\r\n      <ConnectSnappyDial x={127} y={186} h={83} hook={OscWaveSelectorHook} segmentCount={5}>Wave Selector</ConnectSnappyDial>\r\n      <ConnectDial x={193} y={200} h={69} hook={OscPhaseHook}>Phase</ConnectDial>\r\n      <ConnectDial x={259} y={200} h={69} hook={OscGainHook}>Gain</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst DelayWetAmountHook = createStoreHook(Param.DelayWet, setParamDelayWetAmt, [0, 1.1]);\r\n\r\nconst DelayPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={355} y={97} width={57} centered>DELAY</HeaderText>\r\n\r\n      <ReduxDial x={355} y={123} h={68} store={store} action={setParamDelayLength}>Length</ReduxDial>\r\n      <ConnectDial x={355} y={200} h={68} hook={DelayWetAmountHook}>Dry/Wet</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst ReverbWetAmountHook = createStoreHook(Param.ReverbWet, setParamReverbWetAmt, [0, 1.1]);\r\n\r\nconst ReverbPanel = () => {\r\n  return (\r\n    <Group>\r\n      <HeaderText x={355} y={97} width={57} centered>REVERB</HeaderText>\r\n\r\n      <ReduxDial x={355} y={123} h={68} store={store} action={setParamDelayLength}>Length</ReduxDial>\r\n      <ConnectDial x={355} y={200} h={68} hook={ReverbWetAmountHook}>Dry/Wet</ConnectDial>\r\n    </Group>\r\n  );\r\n};\r\n\r\nexport const OscGroupPanel = () => {\r\n  const [enableTouchActive, setTouchActiveEnabled] = useState(true);\r\n  const switchPanels = (checked) => setTouchActiveEnabled(checked);\r\n\r\n  return (\r\n    <Group>\r\n      <OscPanel />\r\n      <PanelDivider x={331} y={110} />\r\n      {enableTouchActive ? <ReverbPanel /> : <DelayPanel />}\r\n      <ToggleIcon x={406} y={89} w={28} h={24} checked={enableTouchActive} onClick={switchPanels} />\r\n    </Group>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { BaseWindow, ToggleIcon, PresetSelector } from './synth';\r\nimport { OscGroupPanel, EnvGroupPanel, MasterGroupPanel, PitchGroupPanel, FilterTouchGroupPanel, AmpEnvGroupPanel } from './synth/window-panels';\r\nimport { getWasmModule } from '../workerActions';\r\nimport { Group } from 'react-konva';\r\nimport { classNames } from '../common';\r\n\r\nexport const SynthWindow = () => {\r\n  const [showOverlay, setOverlayVisible] = useState(true);\r\n  const [showLoading, setIsLoading] = useState(false);\r\n\r\n  const hideOverlay = () => {\r\n    setIsLoading(true);\r\n    getWasmModule().then(() => {\r\n      setOverlayVisible(false);\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n        <h2 className=\"feature-header\">Try the Live Synth in your browser!</h2>\r\n      </div>\r\n      <div className={classNames({ 'row': true, 'row--synth': true, 'blur-animation': showLoading })}>\r\n        <BaseWindow>\r\n          <OscGroupPanel />\r\n          <EnvGroupPanel />\r\n          <MasterGroupPanel />\r\n\r\n          <PitchGroupPanel />\r\n          <AmpEnvGroupPanel />\r\n          <FilterTouchGroupPanel />\r\n\r\n          <WindowCaptionArea />\r\n        </BaseWindow>\r\n        {showOverlay &&\r\n          <InitialWindowOverlay hideOverlay={hideOverlay} isLoading={showLoading} />\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CloseWindowButton = () => {\r\n  const handleClick = () => {\r\n    getWasmModule();\r\n  };\r\n  return <ToggleIcon x={8} y={4} w={20} h={19} onClick={handleClick} />;\r\n};\r\n\r\nconst WindowCaptionArea = () => {\r\n  return (\r\n    <Group>\r\n      <CloseWindowButton />\r\n      <PresetSelector x={367} y={33} />\r\n    </Group>\r\n  );\r\n};\r\n\r\nconst InitialWindowOverlay = ({ hideOverlay, isLoading }) => {\r\n  return (\r\n    <div className='overlay' style={{ width: 925, height: 528 }} onClick={hideOverlay}>\r\n      {!isLoading &&\r\n        <i className=\"fa fa-play\"></i>\r\n      }\r\n    </div>\r\n  );\r\n};\r\nInitialWindowOverlay.propTypes = {\r\n  hideOverlay: PropTypes.func,\r\n  isLoading: PropTypes.bool\r\n};","// @ts-check\r\n\r\n/**\r\n * @param {{[key: string]: any}} obj\r\n */\r\nexport function classNames(obj) {\r\n  return Object.entries(obj).filter(e => e[1]).map(e => e[0]).join(' ');\r\n}","/* eslint-disable react/prop-types */\r\nimport React, { Component } from 'react';\r\nimport { KeyboardElement } from './common/keyboard_element';\r\nimport { SynthWindow } from '../SynthWindow';\r\nimport store, { keyEvents$, observerSubscribe } from '../../store';\r\nimport { map, filter } from 'rxjs/operators';\r\nimport { mapKeyCodeToMidi } from '../../common';\r\nimport { EVENT_KEY_DOWN, EVENT_OCTAVE_INCREMENT } from '../../redux/actionTypes';\r\nimport { Subscription } from 'rxjs';\r\nimport { MetaParam, InvertedMetaParam } from '../../redux/types';\r\n\r\nexport const ProductDemo = () => {\r\n  return (\r\n    <section id=\"demo\">\r\n      <SynthWindow />\r\n      <SynthWindowControls />\r\n    </section>\r\n  );\r\n};\r\n\r\nclass SynthWindowControls extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.containerRef = React.createRef();\r\n    this.midiEvent$ = keyEvents$.pipe(\r\n      map(action => ({\r\n        isDown: action.type === EVENT_KEY_DOWN,\r\n        midi: mapKeyCodeToMidi(action.payload && action.payload.keyCode)\r\n      })),\r\n      filter(midiAction => !!midiAction)\r\n    );\r\n\r\n    this.state = {\r\n      octave: 0\r\n    };\r\n\r\n    const octaveSelector = store => store.meta[InvertedMetaParam[MetaParam.kbOctave]] || 0;\r\n    this.observerUnsubscribe = observerSubscribe(store => {\r\n      this.setState({ octave: octaveSelector(store) });\r\n    }, octaveSelector);\r\n\r\n    this.handleOctaveIncr = this.handleOctaveIncr.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const container = this.containerRef.current;\r\n    this.keyboardInterface = new KeyboardElement(container);\r\n    window.addEventListener('resize', this.resize.bind(this));\r\n\r\n    this.subscriptions = new Subscription();\r\n\r\n    const midiEventSubscription = this.midiEvent$.subscribe(midiAction =>\r\n      midiAction.isDown\r\n        ? this.keyboardInterface.keyDown(midiAction.midi)\r\n        : this.keyboardInterface.keyUp(midiAction.midi)\r\n    );\r\n    this.subscriptions.add(midiEventSubscription);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subscriptions) {\r\n      this.subscriptions.unsubscribe();\r\n    }\r\n    if (this.observerUnsubscribe) {\r\n      this.observerUnsubscribe();\r\n    }\r\n  }\r\n\r\n  resize() {\r\n    this.keyboardInterface.resize();\r\n  }\r\n\r\n  handleOctaveIncr(incrAmount) {\r\n    store.dispatch({\r\n      type: EVENT_OCTAVE_INCREMENT,\r\n      payload: incrAmount\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row keys\">\r\n        <div className=\"keyboard-container\">\r\n          <div id=\"keyboard\" ref={this.containerRef} />\r\n        </div>\r\n        <div className=\"kb-label\">\r\n          <span className=\"kb-label--text\">PC Keyboard Controls:</span>\r\n        </div>\r\n        <div className=\"octave-container\">\r\n          <span className=\"octave-btn\" onClick={() => this.handleOctaveIncr(-1)}>DOWN</span>\r\n          <span className=\"octave\">OCTAVE: {this.state.octave >= 0 ? '+' : ''}{this.state.octave}</span>\r\n          <span className=\"octave-btn\" onClick={() => this.handleOctaveIncr(+1)}>UP</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class Footer extends Component {\r\n  render() {\r\n    let contentData = this.props.contentData;\r\n    return (\r\n      <footer>\r\n        <div className=\"row\">\r\n          <div className=\"twelve columns\">\r\n            <ul className=\"social-links\">\r\n              {\r\n                contentData.socialLinks && contentData.socialLinks.map((item) => {\r\n                  return (\r\n                    <li key={item.url}>\r\n                      <a href={item.url}>\r\n                        <i className={item.className} />\r\n                      </a>\r\n                    </li>\r\n                  );\r\n                })\r\n              }\r\n            </ul>\r\n\r\n          </div>\r\n          <div id=\"go-top\"><a className=\"smoothscroll\" title=\"Back to Top\" href=\"#home\"><i className=\"icon-up-open\" /></a></div>\r\n        </div>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nFooter.propTypes = {\r\n  contentData: PropTypes.object\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nexport const Header = ({ contentData }) => {\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <header id=\"home\">\r\n        <nav id=\"nav-wrap\">\r\n          <a className=\"mobile-btn\" href=\"#nav-wrap\" title=\"Show navigation\">Show navigation</a>\r\n          <a className=\"mobile-btn\" href=\"#\" title=\"Hide navigation\">Hide navigation</a>\r\n          <ul id=\"nav\" className=\"nav\">\r\n            <li className=\"current\"><a className=\"smoothscroll\" href=\"#home\">Home</a></li>\r\n            <li><a className=\"smoothscroll\" href=\"#demo\">Try</a></li>\r\n            <li><a className=\"smoothscroll\" href=\"#about\">About</a></li>\r\n            <li><a className=\"smoothscroll\" href=\"#tech\">Tech</a></li>\r\n            <li><a className=\"smoothscroll\" href=\"#portfolio\">Projects</a></li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <div className=\"row banner\">\r\n          <div className=\"banner-text\">\r\n            <h1 className=\"responsive-headline\">This is {contentData.productName}.</h1>\r\n            <h3 style={{ color: '#fff', fontFamily: 'sans-serif ' }}>\r\n              <span className=\"banner-tagline\">\r\n                {contentData.productRole}\r\n              </span>\r\n              <span className=\"banner-description\">\r\n                {contentData.productDescription}\r\n              </span>\r\n            </h3>\r\n            <hr />\r\n            <ul className=\"social\">\r\n              {\r\n                contentData.socialLinks && contentData.socialLinks.map(item => (\r\n                  <li key={item.name}>\r\n                    <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\"><i className={item.className}></i></a>\r\n                  </li>\r\n                ))\r\n              }\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"scrolldown\">\r\n          <a className=\"smoothscroll icon\" href=\"#demo\"><i className=\"icon-down-circle\"></i></a>\r\n          <a className=\"smoothscroll try-msg\" href=\"#demo\">Try the synth below</a>\r\n        </p>\r\n\r\n      </header>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  contentData: PropTypes.object,\r\n};\r\n","/* eslint-disable react/prop-types */\r\nimport React, { Component } from 'react';\r\nexport class Portfolio extends Component {\r\n  render() {\r\n    let contentData = this.props.contentData;\r\n    return (\r\n      <section id=\"portfolio\">\r\n        <div className=\"row\">\r\n          <div className=\"twelve columns collapsed\">\r\n            <h1>Check Out Some of My Works.</h1>\r\n            <div id=\"portfolio-wrapper\" className=\"bgrid-quarters s-bgrid-thirds cf\">\r\n              {\r\n                contentData.portfolio && contentData.portfolio.map((item) => {\r\n                  return (\r\n                    <div className=\"columns portfolio-item\" key={item.name}>\r\n                      <div className=\"item-wrap\">\r\n                        <a href={item.href}>\r\n                          <img src={item.imgurl} alt={item.name} className=\"item-img\" />\r\n                          <div className=\"overlay\">\r\n                            <div className=\"portfolio-item-meta\">\r\n                              <h5>{item.name}</h5>\r\n                              <p>{item.description}</p>\r\n                            </div>\r\n                          </div>\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}","const contentData = {\r\n  'imagebaseurl': 'https://rbhatia46.github.io/',\r\n  'productName': 'CitySynth',\r\n  'productDescription': 'CitySynth is a polyphonic software synthesizer thats wild but warm offering unrivaled discrete harmonic oscillator control.',\r\n  'productRole': 'An open source WebAudio Synth.',\r\n  'productFeatures': [\r\n    'Polyphonic subtractive synthesizer',\r\n    'Unlimited stacked overtone oscillators',\r\n    'Save your own presets or use from 100+ factory presets',\r\n    'Always online, always free'\r\n  ],\r\n  'name': 'Michael Lawrence',\r\n  'role': 'Software Developer',\r\n  'linkedinId': 'Your LinkedIn Id',\r\n  'skypeid': 'Your skypeid',\r\n  'roleDescription': 'I like dabbling in various parts of frontend development and like to learn about new technologies, write technical articles or simply play games in my free time.',\r\n  'socialLinks': [\r\n    {\r\n      'name': 'github',\r\n      'url': 'http://github.com/michaelblawrence',\r\n      'className': 'fa fa-github'\r\n    }\r\n  ],\r\n  'productAbout': 'CitySynth offers both modulating algorithmic reverb and delay, buttery filters and a per-oscillator analogue-style end stage. Complete with over 100 factory presets, you\\'ll be surprised by the range of possibilities. With musical PC keyboard support and (soon) MIDI support, CitySynth is a tool for the studio and on the go!',\r\n  'prodectTech': `Bringing CitySynth online is only possible due to recent advancements in web tech.\r\n  This was made possible by the rewrite of the original core audio engine in the Rust programming language.\r\n  Leveraging wasm-bindgen, this audio engine is compiled into WebAssembly and instantiated and run on a separate WebAudio worker thread on the browser.\r\n  The new core audio engine allows CitySynth to run reliably with no runtime heap allocations. This makes it a perfect fit for real-time audio synthesis and allows for a predictable runtime in the browser.\r\n  The CitySynth UI, originally implemented in C# WinForms, has been achieved using purely web technologies.\r\n  React, Redux and RxJS have been utilized to provide bi-directional bindings between the WebAudio thread and the interface.\r\n  Taking CitySynth from a desktop executable to the Web has come with many challenges and resulted in a medley of new and interesting tech! Come back soon for a blog post recording some of the challenges faced in recreating this virtual instrument on the web.\r\n  There's plenty more to come from the CitySynth project, a proof of concept VST plugin can be found on the city-rust repo, and there are plans to target native desktop once again with the power of node.js and electron! So feel free to keep in touch or even contribute to the open-source projects!`,\r\n  'aboutme': 'I am currently a pre-final year student at The LNM Institute of Information Technology and pursuing my B.Tech from here. I am a self taught Full Stack Web Developer, currently diving deeper into Machine Learning. I believe that to be successful in life, one needs to be obsessive with their dreams and keep working towards them.',\r\n  'address': 'London',\r\n  'website': 'https://michaelblawrence.github.io/rustwasmtester/react/',\r\n  'education': [\r\n    {\r\n      'UniversityName': 'University College London',\r\n      'specialization': 'Chemistry MSci',\r\n      'MonthOfPassing': 'Jun',\r\n      'YearOfPassing': '2018',\r\n      'Achievements': 'Some Achievements'\r\n    }\r\n  ],\r\n  'work': [\r\n    {\r\n      'CompanyName': 'Spreadex',\r\n      'specialization': 'Graduate .NET Software Developer',\r\n      'MonthOfLeaving': 'Sept',\r\n      'YearOfLeaving': '2018',\r\n      'Achievements': 'Some Achievements'\r\n    }\r\n  ],\r\n  'skillsDescription': 'Your skills here',\r\n  'skills': [\r\n    {\r\n      'skillname': 'C# / .NET'\r\n    },\r\n    {\r\n      'skillname': 'Typescript / Angular'\r\n    },\r\n    {\r\n      'skillname': 'Rust / WebAssembly'\r\n    }\r\n  ],\r\n  'portfolio': [\r\n    {\r\n      'name': 'projectnucleus',\r\n      'description': 'A fast-paced couch multiplayer game',\r\n      'href': 'https://github.com/michaelblawrence/projectnucleus',\r\n      'imgurl': 'images/projectnucleus_screenshot001.png'\r\n    },\r\n    {\r\n      'name': 'CitySynth Online',\r\n      'description': 'This website is also open source, complete with the live demo of CitySynth Online',\r\n      'href': 'https://github.com/michaelblawrence/CitySynthDemo',\r\n      'imgurl': 'images/this-is-city-synth.png'\r\n    },\r\n    {\r\n      'name': 'learnr',\r\n      'description': 'A LSTM-based single-player game training machine learning library',\r\n      'href': 'https://github.com/michaelblawrence/learnr',\r\n      'imgurl': 'images/learnr-training-demo.png'\r\n    }\r\n  ],\r\n  'testimonials': [\r\n    {\r\n      'description': 'This is a sample testimonial',\r\n      'name': 'Some technical guy'\r\n    },\r\n    {\r\n      'description': 'This is a sample testimonial',\r\n      'name': 'Some technical guy'\r\n    }\r\n  ]\r\n};\r\n\r\nexport default contentData;","import React from 'react';\r\nimport { Header, Footer, Portfolio, ProductAbout, ProductDemo, TechStackAbout } from './components';\r\nimport contentData from './contentData';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header contentData={contentData} />\r\n      <ProductDemo contentData={contentData} />\r\n      <ProductAbout contentData={contentData}/>\r\n      <TechStackAbout contentData={contentData} />\r\n      <Portfolio contentData={contentData} />\r\n      <Footer contentData={contentData} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}